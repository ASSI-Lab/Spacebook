{"ast":null,"code":"var leafletControlGeocoder = function (exports, L) {\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = Object.create(null);\n\n    if (e) {\n      Object.keys(e).forEach(function (k) {\n        if (k !== 'default') {\n          var d = Object.getOwnPropertyDescriptor(e, k);\n          Object.defineProperty(n, k, d.get ? d : {\n            enumerable: true,\n            get: function get() {\n              return e[k];\n            }\n          });\n        }\n      });\n    }\n\n    n['default'] = e;\n    return n;\n  }\n\n  var L__namespace = /*#__PURE__*/_interopNamespace(L);\n\n  function _inheritsLoose(subClass, superClass) {\n    subClass.prototype = Object.create(superClass.prototype);\n    subClass.prototype.constructor = subClass;\n    subClass.__proto__ = superClass;\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n  /**\n   * @internal\n   */\n\n\n  function geocodingParams(options, params) {\n    return L__namespace.Util.extend(params, options.geocodingQueryParams);\n  }\n  /**\n   * @internal\n   */\n\n\n  function reverseParams(options, params) {\n    return L__namespace.Util.extend(params, options.reverseQueryParams);\n  }\n  /**\n   * @internal\n   */\n\n\n  var lastCallbackId = 0; // Adapted from handlebars.js\n  // https://github.com/wycats/handlebars.js/\n\n  /**\n   * @internal\n   */\n\n  var badChars = /[&<>\"'`]/g;\n  /**\n   * @internal\n   */\n\n  var possible = /[&<>\"'`]/;\n  /**\n   * @internal\n   */\n\n  var escape = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;'\n  };\n  /**\n   * @internal\n   */\n\n  function escapeChar(chr) {\n    return escape[chr];\n  }\n  /**\n   * @internal\n   */\n\n\n  function htmlEscape(string) {\n    if (string == null) {\n      return '';\n    } else if (!string) {\n      return string + '';\n    } // Force a string conversion as this will be done by the append regardless and\n    // the regex test will do this transparently behind the scenes, causing issues if\n    // an object's to string has escaped characters in it.\n\n\n    string = '' + string;\n\n    if (!possible.test(string)) {\n      return string;\n    }\n\n    return string.replace(badChars, escapeChar);\n  }\n  /**\n   * @internal\n   */\n\n\n  function jsonp(url, params, callback, context, jsonpParam) {\n    var callbackId = '_l_geocoder_' + lastCallbackId++;\n    params[jsonpParam || 'callback'] = callbackId;\n    window[callbackId] = L__namespace.Util.bind(callback, context);\n    var script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.src = url + getParamString(params);\n    script.id = callbackId;\n    document.getElementsByTagName('head')[0].appendChild(script);\n  }\n  /**\n   * @internal\n   */\n\n\n  function getJSON(url, params, callback) {\n    var xmlHttp = new XMLHttpRequest();\n\n    xmlHttp.onreadystatechange = function () {\n      if (xmlHttp.readyState !== 4) {\n        return;\n      }\n\n      var message;\n\n      if (xmlHttp.status !== 200 && xmlHttp.status !== 304) {\n        message = '';\n      } else if (typeof xmlHttp.response === 'string') {\n        // IE doesn't parse JSON responses even with responseType: 'json'.\n        try {\n          message = JSON.parse(xmlHttp.response);\n        } catch (e) {\n          // Not a JSON response\n          message = xmlHttp.response;\n        }\n      } else {\n        message = xmlHttp.response;\n      }\n\n      callback(message);\n    };\n\n    xmlHttp.open('GET', url + getParamString(params), true);\n    xmlHttp.responseType = 'json';\n    xmlHttp.setRequestHeader('Accept', 'application/json');\n    xmlHttp.send(null);\n  }\n  /**\n   * @internal\n   */\n\n\n  function template(str, data) {\n    return str.replace(/\\{ *([\\w_]+) *\\}/g, function (str, key) {\n      var value = data[key];\n\n      if (value === undefined) {\n        value = '';\n      } else if (typeof value === 'function') {\n        value = value(data);\n      }\n\n      return htmlEscape(value);\n    });\n  }\n  /**\n   * @internal\n   */\n\n\n  function getParamString(obj, existingUrl, uppercase) {\n    var params = [];\n\n    for (var i in obj) {\n      var key = encodeURIComponent(uppercase ? i.toUpperCase() : i);\n      var value = obj[i];\n\n      if (!Array.isArray(value)) {\n        params.push(key + '=' + encodeURIComponent(String(value)));\n      } else {\n        for (var j = 0; j < value.length; j++) {\n          params.push(key + '=' + encodeURIComponent(value[j]));\n        }\n      }\n    }\n\n    return (!existingUrl || existingUrl.indexOf('?') === -1 ? '?' : '&') + params.join('&');\n  }\n  /**\n   * Implementation of the [ArcGIS geocoder](https://developers.arcgis.com/features/geocoding/)\n   */\n\n\n  var ArcGis = /*#__PURE__*/function () {\n    function ArcGis(options) {\n      this.options = {\n        serviceUrl: 'https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer',\n        apiKey: ''\n      };\n      L__namespace.Util.setOptions(this, options);\n    }\n\n    var _proto = ArcGis.prototype;\n\n    _proto.geocode = function geocode(query, cb, context) {\n      var params = geocodingParams(this.options, {\n        token: this.options.apiKey,\n        SingleLine: query,\n        outFields: 'Addr_Type',\n        forStorage: false,\n        maxLocations: 10,\n        f: 'json'\n      });\n      getJSON(this.options.serviceUrl + '/findAddressCandidates', params, function (data) {\n        var results = [];\n\n        if (data.candidates && data.candidates.length) {\n          for (var i = 0; i <= data.candidates.length - 1; i++) {\n            var loc = data.candidates[i];\n            var latLng = L__namespace.latLng(loc.location.y, loc.location.x);\n            var latLngBounds = L__namespace.latLngBounds(L__namespace.latLng(loc.extent.ymax, loc.extent.xmax), L__namespace.latLng(loc.extent.ymin, loc.extent.xmin));\n            results[i] = {\n              name: loc.address,\n              bbox: latLngBounds,\n              center: latLng\n            };\n          }\n        }\n\n        cb.call(context, results);\n      });\n    };\n\n    _proto.suggest = function suggest(query, cb, context) {\n      return this.geocode(query, cb, context);\n    };\n\n    _proto.reverse = function reverse(location, scale, cb, context) {\n      var params = reverseParams(this.options, {\n        location: location.lng + ',' + location.lat,\n        distance: 100,\n        f: 'json'\n      });\n      getJSON(this.options.serviceUrl + '/reverseGeocode', params, function (data) {\n        var result = [];\n\n        if (data && !data.error) {\n          var center = L__namespace.latLng(data.location.y, data.location.x);\n          var bbox = L__namespace.latLngBounds(center, center);\n          result.push({\n            name: data.address.Match_addr,\n            center: center,\n            bbox: bbox\n          });\n        }\n\n        cb.call(context, result);\n      });\n    };\n\n    return ArcGis;\n  }();\n  /**\n   * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link ArcGis}\n   * @param options the options\n   */\n\n\n  function arcgis(options) {\n    return new ArcGis(options);\n  }\n  /**\n   * Implementation of the [Bing Locations API](https://docs.microsoft.com/en-us/bingmaps/rest-services/locations/)\n   */\n\n\n  var Bing = /*#__PURE__*/function () {\n    function Bing(options) {\n      this.options = {\n        serviceUrl: 'https://dev.virtualearth.net/REST/v1/Locations'\n      };\n      L__namespace.Util.setOptions(this, options);\n    }\n\n    var _proto = Bing.prototype;\n\n    _proto.geocode = function geocode(query, cb, context) {\n      var params = geocodingParams(this.options, {\n        query: query,\n        key: this.options.apiKey\n      });\n      jsonp(this.options.apiKey, params, function (data) {\n        var results = [];\n\n        if (data.resourceSets.length > 0) {\n          for (var i = data.resourceSets[0].resources.length - 1; i >= 0; i--) {\n            var resource = data.resourceSets[0].resources[i],\n                bbox = resource.bbox;\n            results[i] = {\n              name: resource.name,\n              bbox: L__namespace.latLngBounds([bbox[0], bbox[1]], [bbox[2], bbox[3]]),\n              center: L__namespace.latLng(resource.point.coordinates)\n            };\n          }\n        }\n\n        cb.call(context, results);\n      }, this, 'jsonp');\n    };\n\n    _proto.reverse = function reverse(location, scale, cb, context) {\n      var params = reverseParams(this.options, {\n        key: this.options.apiKey\n      });\n      jsonp(this.options.serviceUrl + location.lat + ',' + location.lng, params, function (data) {\n        var results = [];\n\n        for (var i = data.resourceSets[0].resources.length - 1; i >= 0; i--) {\n          var resource = data.resourceSets[0].resources[i],\n              bbox = resource.bbox;\n          results[i] = {\n            name: resource.name,\n            bbox: L__namespace.latLngBounds([bbox[0], bbox[1]], [bbox[2], bbox[3]]),\n            center: L__namespace.latLng(resource.point.coordinates)\n          };\n        }\n\n        cb.call(context, results);\n      }, this, 'jsonp');\n    };\n\n    return Bing;\n  }();\n  /**\n   * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Bing}\n   * @param options the options\n   */\n\n\n  function bing(options) {\n    return new Bing(options);\n  }\n\n  var Google = /*#__PURE__*/function () {\n    function Google(options) {\n      this.options = {\n        serviceUrl: 'https://maps.googleapis.com/maps/api/geocode/json'\n      };\n      L__namespace.Util.setOptions(this, options);\n    }\n\n    var _proto = Google.prototype;\n\n    _proto.geocode = function geocode(query, cb, context) {\n      var params = geocodingParams(this.options, {\n        key: this.options.apiKey,\n        address: query\n      });\n      getJSON(this.options.serviceUrl, params, function (data) {\n        var results = [];\n\n        if (data.results && data.results.length) {\n          for (var i = 0; i <= data.results.length - 1; i++) {\n            var loc = data.results[i];\n            var latLng = L__namespace.latLng(loc.geometry.location);\n            var latLngBounds = L__namespace.latLngBounds(L__namespace.latLng(loc.geometry.viewport.northeast), L__namespace.latLng(loc.geometry.viewport.southwest));\n            results[i] = {\n              name: loc.formatted_address,\n              bbox: latLngBounds,\n              center: latLng,\n              properties: loc.address_components\n            };\n          }\n        }\n\n        cb.call(context, results);\n      });\n    };\n\n    _proto.reverse = function reverse(location, scale, cb, context) {\n      var params = reverseParams(this.options, {\n        key: this.options.apiKey,\n        latlng: location.lat + ',' + location.lng\n      });\n      getJSON(this.options.serviceUrl, params, function (data) {\n        var results = [];\n\n        if (data.results && data.results.length) {\n          for (var i = 0; i <= data.results.length - 1; i++) {\n            var loc = data.results[i];\n            var center = L__namespace.latLng(loc.geometry.location);\n            var bbox = L__namespace.latLngBounds(L__namespace.latLng(loc.geometry.viewport.northeast), L__namespace.latLng(loc.geometry.viewport.southwest));\n            results[i] = {\n              name: loc.formatted_address,\n              bbox: bbox,\n              center: center,\n              properties: loc.address_components\n            };\n          }\n        }\n\n        cb.call(context, results);\n      });\n    };\n\n    return Google;\n  }();\n  /**\n   * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Google}\n   * @param options the options\n   */\n\n\n  function google(options) {\n    return new Google(options);\n  }\n  /**\n   * Implementation of the [HERE Geocoder API](https://developer.here.com/documentation/geocoder/topics/introduction.html)\n   */\n\n\n  var HERE = /*#__PURE__*/function () {\n    function HERE(options) {\n      this.options = {\n        serviceUrl: 'https://geocoder.api.here.com/6.2/',\n        app_id: '',\n        app_code: '',\n        apiKey: '',\n        maxResults: 5\n      };\n      L__namespace.Util.setOptions(this, options);\n      if (options.apiKey) throw Error('apiKey is not supported, use app_id/app_code instead!');\n    }\n\n    var _proto = HERE.prototype;\n\n    _proto.geocode = function geocode(query, cb, context) {\n      var params = geocodingParams(this.options, {\n        searchtext: query,\n        gen: 9,\n        app_id: this.options.app_id,\n        app_code: this.options.app_code,\n        jsonattributes: 1,\n        maxresults: this.options.maxResults\n      });\n      this.getJSON(this.options.serviceUrl + 'geocode.json', params, cb, context);\n    };\n\n    _proto.reverse = function reverse(location, scale, cb, context) {\n      var prox = location.lat + ',' + location.lng;\n\n      if (this.options.reverseGeocodeProxRadius) {\n        prox += ',' + this.options.reverseGeocodeProxRadius;\n      }\n\n      var params = reverseParams(this.options, {\n        prox: prox,\n        mode: 'retrieveAddresses',\n        app_id: this.options.app_id,\n        app_code: this.options.app_code,\n        gen: 9,\n        jsonattributes: 1,\n        maxresults: this.options.maxResults\n      });\n      this.getJSON(this.options.serviceUrl + 'reversegeocode.json', params, cb, context);\n    };\n\n    _proto.getJSON = function getJSON$1(url, params, cb, context) {\n      getJSON(url, params, function (data) {\n        var results = [];\n\n        if (data.response.view && data.response.view.length) {\n          for (var i = 0; i <= data.response.view[0].result.length - 1; i++) {\n            var loc = data.response.view[0].result[i].location;\n            var center = L__namespace.latLng(loc.displayPosition.latitude, loc.displayPosition.longitude);\n            var bbox = L__namespace.latLngBounds(L__namespace.latLng(loc.mapView.topLeft.latitude, loc.mapView.topLeft.longitude), L__namespace.latLng(loc.mapView.bottomRight.latitude, loc.mapView.bottomRight.longitude));\n            results[i] = {\n              name: loc.address.label,\n              properties: loc.address,\n              bbox: bbox,\n              center: center\n            };\n          }\n        }\n\n        cb.call(context, results);\n      });\n    };\n\n    return HERE;\n  }();\n  /**\n   * Implementation of the new [HERE Geocoder API](https://developer.here.com/documentation/geocoding-search-api/api-reference-swagger.html)\n   */\n\n\n  var HEREv2 = /*#__PURE__*/function () {\n    function HEREv2(options) {\n      this.options = {\n        serviceUrl: 'https://geocode.search.hereapi.com/v1',\n        apiKey: '',\n        app_id: '',\n        app_code: '',\n        maxResults: 10\n      };\n      L__namespace.Util.setOptions(this, options);\n    }\n\n    var _proto2 = HEREv2.prototype;\n\n    _proto2.geocode = function geocode(query, cb, context) {\n      var params = geocodingParams(this.options, {\n        q: query,\n        apiKey: this.options.apiKey,\n        limit: this.options.maxResults\n      });\n\n      if (!params.at && !params[\"in\"]) {\n        throw Error('at / in parameters not found. Please define coordinates (at=latitude,longitude) or other (in) in your geocodingQueryParams.');\n      }\n\n      this.getJSON(this.options.serviceUrl + '/discover', params, cb, context);\n    };\n\n    _proto2.reverse = function reverse(location, scale, cb, context) {\n      var params = reverseParams(this.options, {\n        at: location.lat + ',' + location.lng,\n        limit: this.options.reverseGeocodeProxRadius,\n        apiKey: this.options.apiKey\n      });\n      this.getJSON(this.options.serviceUrl + '/revgeocode', params, cb, context);\n    };\n\n    _proto2.getJSON = function getJSON$1(url, params, cb, context) {\n      getJSON(url, params, function (data) {\n        var results = [];\n\n        if (data.items && data.items.length) {\n          for (var i = 0; i <= data.items.length - 1; i++) {\n            var item = data.items[i];\n            var latLng = L__namespace.latLng(item.position.lat, item.position.lng);\n            var bbox = void 0;\n\n            if (item.mapView) {\n              bbox = L__namespace.latLngBounds(L__namespace.latLng(item.mapView.south, item.mapView.west), L__namespace.latLng(item.mapView.north, item.mapView.east));\n            } else {\n              // Using only position when not provided\n              bbox = L__namespace.latLngBounds(L__namespace.latLng(item.position.lat, item.position.lng), L__namespace.latLng(item.position.lat, item.position.lng));\n            }\n\n            results[i] = {\n              name: item.address.label,\n              properties: item.address,\n              bbox: bbox,\n              center: latLng\n            };\n          }\n        }\n\n        cb.call(context, results);\n      });\n    };\n\n    return HEREv2;\n  }();\n  /**\n   * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link HERE}\n   * @param options the options\n   */\n\n\n  function here(options) {\n    if (options.apiKey) {\n      return new HEREv2(options);\n    } else {\n      return new HERE(options);\n    }\n  }\n  /**\n   * Parses basic latitude/longitude strings such as `'50.06773 14.37742'`, `'N50.06773 W14.37742'`, `'S 50° 04.064 E 014° 22.645'`, or `'S 50° 4′ 03.828″, W 14° 22′ 38.712″'`\n   * @param query the latitude/longitude string to parse\n   * @returns the parsed latitude/longitude\n   */\n\n\n  function parseLatLng(query) {\n    var match; // regex from https://github.com/openstreetmap/openstreetmap-website/blob/master/app/controllers/geocoder_controller.rb\n\n    if (match = query.match(/^([NS])\\s*(\\d{1,3}(?:\\.\\d*)?)\\W*([EW])\\s*(\\d{1,3}(?:\\.\\d*)?)$/)) {\n      // [NSEW] decimal degrees\n      return L__namespace.latLng((/N/i.test(match[1]) ? 1 : -1) * +match[2], (/E/i.test(match[3]) ? 1 : -1) * +match[4]);\n    } else if (match = query.match(/^(\\d{1,3}(?:\\.\\d*)?)\\s*([NS])\\W*(\\d{1,3}(?:\\.\\d*)?)\\s*([EW])$/)) {\n      // decimal degrees [NSEW]\n      return L__namespace.latLng((/N/i.test(match[2]) ? 1 : -1) * +match[1], (/E/i.test(match[4]) ? 1 : -1) * +match[3]);\n    } else if (match = query.match(/^([NS])\\s*(\\d{1,3})°?\\s*(\\d{1,3}(?:\\.\\d*)?)?['′]?\\W*([EW])\\s*(\\d{1,3})°?\\s*(\\d{1,3}(?:\\.\\d*)?)?['′]?$/)) {\n      // [NSEW] degrees, decimal minutes\n      return L__namespace.latLng((/N/i.test(match[1]) ? 1 : -1) * (+match[2] + +match[3] / 60), (/E/i.test(match[4]) ? 1 : -1) * (+match[5] + +match[6] / 60));\n    } else if (match = query.match(/^(\\d{1,3})°?\\s*(\\d{1,3}(?:\\.\\d*)?)?['′]?\\s*([NS])\\W*(\\d{1,3})°?\\s*(\\d{1,3}(?:\\.\\d*)?)?['′]?\\s*([EW])$/)) {\n      // degrees, decimal minutes [NSEW]\n      return L__namespace.latLng((/N/i.test(match[3]) ? 1 : -1) * (+match[1] + +match[2] / 60), (/E/i.test(match[6]) ? 1 : -1) * (+match[4] + +match[5] / 60));\n    } else if (match = query.match(/^([NS])\\s*(\\d{1,3})°?\\s*(\\d{1,2})['′]?\\s*(\\d{1,3}(?:\\.\\d*)?)?[\"″]?\\W*([EW])\\s*(\\d{1,3})°?\\s*(\\d{1,2})['′]?\\s*(\\d{1,3}(?:\\.\\d*)?)?[\"″]?$/)) {\n      // [NSEW] degrees, minutes, decimal seconds\n      return L__namespace.latLng((/N/i.test(match[1]) ? 1 : -1) * (+match[2] + +match[3] / 60 + +match[4] / 3600), (/E/i.test(match[5]) ? 1 : -1) * (+match[6] + +match[7] / 60 + +match[8] / 3600));\n    } else if (match = query.match(/^(\\d{1,3})°?\\s*(\\d{1,2})['′]?\\s*(\\d{1,3}(?:\\.\\d*)?)?[\"″]\\s*([NS])\\W*(\\d{1,3})°?\\s*(\\d{1,2})['′]?\\s*(\\d{1,3}(?:\\.\\d*)?)?[\"″]?\\s*([EW])$/)) {\n      // degrees, minutes, decimal seconds [NSEW]\n      return L__namespace.latLng((/N/i.test(match[4]) ? 1 : -1) * (+match[1] + +match[2] / 60 + +match[3] / 3600), (/E/i.test(match[8]) ? 1 : -1) * (+match[5] + +match[6] / 60 + +match[7] / 3600));\n    } else if (match = query.match(/^\\s*([+-]?\\d+(?:\\.\\d*)?)\\s*[\\s,]\\s*([+-]?\\d+(?:\\.\\d*)?)\\s*$/)) {\n      return L__namespace.latLng(+match[1], +match[2]);\n    }\n  }\n  /**\n   * Parses basic latitude/longitude strings such as `'50.06773 14.37742'`, `'N50.06773 W14.37742'`, `'S 50° 04.064 E 014° 22.645'`, or `'S 50° 4′ 03.828″, W 14° 22′ 38.712″'`\n   */\n\n\n  var LatLng = /*#__PURE__*/function () {\n    function LatLng(options) {\n      this.options = {\n        next: undefined,\n        sizeInMeters: 10000\n      };\n      L__namespace.Util.setOptions(this, options);\n    }\n\n    var _proto = LatLng.prototype;\n\n    _proto.geocode = function geocode(query, cb, context) {\n      var center = parseLatLng(query);\n\n      if (center) {\n        var results = [{\n          name: query,\n          center: center,\n          bbox: center.toBounds(this.options.sizeInMeters)\n        }];\n        cb.call(context, results);\n      } else if (this.options.next) {\n        this.options.next.geocode(query, cb, context);\n      }\n    };\n\n    return LatLng;\n  }();\n  /**\n   * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link LatLng}\n   * @param options the options\n   */\n\n\n  function latLng(options) {\n    return new LatLng(options);\n  }\n  /**\n   * Implementation of the [Mapbox Geocoding](https://www.mapbox.com/api-documentation/#geocoding)\n   */\n\n\n  var Mapbox = /*#__PURE__*/function () {\n    function Mapbox(options) {\n      this.options = {\n        serviceUrl: 'https://api.mapbox.com/geocoding/v5/mapbox.places/'\n      };\n      L__namespace.Util.setOptions(this, options);\n    }\n\n    var _proto = Mapbox.prototype;\n\n    _proto._getProperties = function _getProperties(loc) {\n      var properties = {\n        text: loc.text,\n        address: loc.address\n      };\n\n      for (var j = 0; j < (loc.context || []).length; j++) {\n        var id = loc.context[j].id.split('.')[0];\n        properties[id] = loc.context[j].text; // Get country code when available\n\n        if (loc.context[j].short_code) {\n          properties['countryShortCode'] = loc.context[j].short_code;\n        }\n      }\n\n      return properties;\n    };\n\n    _proto.geocode = function geocode(query, cb, context) {\n      var _this = this;\n\n      var params = geocodingParams(this.options, {\n        access_token: this.options.apiKey\n      });\n\n      if (params.proximity !== undefined && params.proximity.lat !== undefined && params.proximity.lng !== undefined) {\n        params.proximity = params.proximity.lng + ',' + params.proximity.lat;\n      }\n\n      getJSON(this.options.serviceUrl + encodeURIComponent(query) + '.json', params, function (data) {\n        var results = [];\n\n        if (data.features && data.features.length) {\n          for (var i = 0; i <= data.features.length - 1; i++) {\n            var loc = data.features[i];\n            var center = L__namespace.latLng(loc.center.reverse());\n            var bbox = void 0;\n\n            if (loc.bbox) {\n              bbox = L__namespace.latLngBounds(L__namespace.latLng(loc.bbox.slice(0, 2).reverse()), L__namespace.latLng(loc.bbox.slice(2, 4).reverse()));\n            } else {\n              bbox = L__namespace.latLngBounds(center, center);\n            }\n\n            results[i] = {\n              name: loc.place_name,\n              bbox: bbox,\n              center: center,\n              properties: _this._getProperties(loc)\n            };\n          }\n        }\n\n        cb.call(context, results);\n      });\n    };\n\n    _proto.suggest = function suggest(query, cb, context) {\n      return this.geocode(query, cb, context);\n    };\n\n    _proto.reverse = function reverse(location, scale, cb, context) {\n      var _this2 = this;\n\n      var url = this.options.serviceUrl + location.lng + ',' + location.lat + '.json';\n      var param = reverseParams(this.options, {\n        access_token: this.options.apiKey\n      });\n      getJSON(url, param, function (data) {\n        var results = [];\n\n        if (data.features && data.features.length) {\n          for (var i = 0; i <= data.features.length - 1; i++) {\n            var loc = data.features[i];\n            var center = L__namespace.latLng(loc.center.reverse());\n            var bbox = void 0;\n\n            if (loc.bbox) {\n              bbox = L__namespace.latLngBounds(L__namespace.latLng(loc.bbox.slice(0, 2).reverse()), L__namespace.latLng(loc.bbox.slice(2, 4).reverse()));\n            } else {\n              bbox = L__namespace.latLngBounds(center, center);\n            }\n\n            results[i] = {\n              name: loc.place_name,\n              bbox: bbox,\n              center: center,\n              properties: _this2._getProperties(loc)\n            };\n          }\n        }\n\n        cb.call(context, results);\n      });\n    };\n\n    return Mapbox;\n  }();\n  /**\n   * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Mapbox}\n   * @param options the options\n   */\n\n\n  function mapbox(options) {\n    return new Mapbox(options);\n  }\n  /**\n   * Implementation of the [MapQuest Geocoding API](http://developer.mapquest.com/web/products/dev-services/geocoding-ws)\n   */\n\n\n  var MapQuest = /*#__PURE__*/function () {\n    function MapQuest(options) {\n      this.options = {\n        serviceUrl: 'https://www.mapquestapi.com/geocoding/v1'\n      };\n      L__namespace.Util.setOptions(this, options); // MapQuest seems to provide URI encoded API keys,\n      // so to avoid encoding them twice, we decode them here\n\n      this.options.apiKey = decodeURIComponent(this.options.apiKey);\n    }\n\n    var _proto = MapQuest.prototype;\n\n    _proto._formatName = function _formatName() {\n      return [].slice.call(arguments).filter(function (s) {\n        return !!s;\n      }).join(', ');\n    };\n\n    _proto.geocode = function geocode(query, cb, context) {\n      var params = geocodingParams(this.options, {\n        key: this.options.apiKey,\n        location: query,\n        limit: 5,\n        outFormat: 'json'\n      });\n      getJSON(this.options.serviceUrl + '/address', params, L__namespace.Util.bind(function (data) {\n        var results = [];\n\n        if (data.results && data.results[0].locations) {\n          for (var i = data.results[0].locations.length - 1; i >= 0; i--) {\n            var loc = data.results[0].locations[i];\n            var center = L__namespace.latLng(loc.latLng);\n            results[i] = {\n              name: this._formatName(loc.street, loc.adminArea4, loc.adminArea3, loc.adminArea1),\n              bbox: L__namespace.latLngBounds(center, center),\n              center: center\n            };\n          }\n        }\n\n        cb.call(context, results);\n      }, this));\n    };\n\n    _proto.reverse = function reverse(location, scale, cb, context) {\n      var params = reverseParams(this.options, {\n        key: this.options.apiKey,\n        location: location.lat + ',' + location.lng,\n        outputFormat: 'json'\n      });\n      getJSON(this.options.serviceUrl + '/reverse', params, L__namespace.Util.bind(function (data) {\n        var results = [];\n\n        if (data.results && data.results[0].locations) {\n          for (var i = data.results[0].locations.length - 1; i >= 0; i--) {\n            var loc = data.results[0].locations[i];\n            var center = L__namespace.latLng(loc.latLng);\n            results[i] = {\n              name: this._formatName(loc.street, loc.adminArea4, loc.adminArea3, loc.adminArea1),\n              bbox: L__namespace.latLngBounds(center, center),\n              center: center\n            };\n          }\n        }\n\n        cb.call(context, results);\n      }, this));\n    };\n\n    return MapQuest;\n  }();\n  /**\n   * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link MapQuest}\n   * @param options the options\n   */\n\n\n  function mapQuest(options) {\n    return new MapQuest(options);\n  }\n  /**\n   * Implementation of the [Neutrino API](https://www.neutrinoapi.com/api/geocode-address/)\n   */\n\n\n  var Neutrino = /*#__PURE__*/function () {\n    function Neutrino(options) {\n      this.options = {\n        userId: undefined,\n        apiKey: undefined,\n        serviceUrl: 'https://neutrinoapi.com/'\n      };\n      L__namespace.Util.setOptions(this, options);\n    } // https://www.neutrinoapi.com/api/geocode-address/\n\n\n    var _proto = Neutrino.prototype;\n\n    _proto.geocode = function geocode(query, cb, context) {\n      var params = geocodingParams(this.options, {\n        apiKey: this.options.apiKey,\n        userId: this.options.userId,\n        //get three words and make a dot based string\n        address: query.split(/\\s+/).join('.')\n      });\n      getJSON(this.options.serviceUrl + 'geocode-address', params, function (data) {\n        var results = [];\n\n        if (data.locations) {\n          data.geometry = data.locations[0];\n          var center = L__namespace.latLng(data.geometry['latitude'], data.geometry['longitude']);\n          var bbox = L__namespace.latLngBounds(center, center);\n          results[0] = {\n            name: data.geometry.address,\n            bbox: bbox,\n            center: center\n          };\n        }\n\n        cb.call(context, results);\n      });\n    };\n\n    _proto.suggest = function suggest(query, cb, context) {\n      return this.geocode(query, cb, context);\n    } // https://www.neutrinoapi.com/api/geocode-reverse/\n    ;\n\n    _proto.reverse = function reverse(location, scale, cb, context) {\n      var params = reverseParams(this.options, {\n        apiKey: this.options.apiKey,\n        userId: this.options.userId,\n        latitude: location.lat,\n        longitude: location.lng\n      });\n      getJSON(this.options.serviceUrl + 'geocode-reverse', params, function (data) {\n        var results = [];\n\n        if (data.status.status == 200 && data.found) {\n          var center = L__namespace.latLng(location.lat, location.lng);\n          var bbox = L__namespace.latLngBounds(center, center);\n          results[0] = {\n            name: data.address,\n            bbox: bbox,\n            center: center\n          };\n        }\n\n        cb.call(context, results);\n      });\n    };\n\n    return Neutrino;\n  }();\n  /**\n   * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Neutrino}\n   * @param options the options\n   */\n\n\n  function neutrino(options) {\n    return new Neutrino(options);\n  }\n  /**\n   * Implementation of the [Nominatim](https://wiki.openstreetmap.org/wiki/Nominatim) geocoder.\n   *\n   * This is the default geocoding service used by the control, unless otherwise specified in the options.\n   *\n   * Unless using your own Nominatim installation, please refer to the [Nominatim usage policy](https://operations.osmfoundation.org/policies/nominatim/).\n   */\n\n\n  var Nominatim = /*#__PURE__*/function () {\n    function Nominatim(options) {\n      this.options = {\n        serviceUrl: 'https://nominatim.openstreetmap.org/',\n        htmlTemplate: function htmlTemplate(r) {\n          var address = r.address;\n          var className;\n          var parts = [];\n\n          if (address.road || address.building) {\n            parts.push('{building} {road} {house_number}');\n          }\n\n          if (address.city || address.town || address.village || address.hamlet) {\n            className = parts.length > 0 ? 'leaflet-control-geocoder-address-detail' : '';\n            parts.push('<span class=\"' + className + '\">{postcode} {city} {town} {village} {hamlet}</span>');\n          }\n\n          if (address.state || address.country) {\n            className = parts.length > 0 ? 'leaflet-control-geocoder-address-context' : '';\n            parts.push('<span class=\"' + className + '\">{state} {country}</span>');\n          }\n\n          return template(parts.join('<br/>'), address);\n        }\n      };\n      L__namespace.Util.setOptions(this, options || {});\n    }\n\n    var _proto = Nominatim.prototype;\n\n    _proto.geocode = function geocode(query, cb, context) {\n      var _this = this;\n\n      var params = geocodingParams(this.options, {\n        q: query,\n        limit: 5,\n        format: 'json',\n        addressdetails: 1\n      });\n      getJSON(this.options.serviceUrl + 'search', params, function (data) {\n        var results = [];\n\n        for (var i = data.length - 1; i >= 0; i--) {\n          var bbox = data[i].boundingbox;\n\n          for (var j = 0; j < 4; j++) {\n            bbox[j] = +bbox[j];\n          }\n\n          results[i] = {\n            icon: data[i].icon,\n            name: data[i].display_name,\n            html: _this.options.htmlTemplate ? _this.options.htmlTemplate(data[i]) : undefined,\n            bbox: L__namespace.latLngBounds([bbox[0], bbox[2]], [bbox[1], bbox[3]]),\n            center: L__namespace.latLng(data[i].lat, data[i].lon),\n            properties: data[i]\n          };\n        }\n\n        cb.call(context, results);\n      });\n    };\n\n    _proto.reverse = function reverse(location, scale, cb, context) {\n      var _this2 = this;\n\n      var params = reverseParams(this.options, {\n        lat: location.lat,\n        lon: location.lng,\n        zoom: Math.round(Math.log(scale / 256) / Math.log(2)),\n        addressdetails: 1,\n        format: 'json'\n      });\n      getJSON(this.options.serviceUrl + 'reverse', params, function (data) {\n        var result = [];\n\n        if (data && data.lat && data.lon) {\n          var center = L__namespace.latLng(data.lat, data.lon);\n          var bbox = L__namespace.latLngBounds(center, center);\n          result.push({\n            name: data.display_name,\n            html: _this2.options.htmlTemplate ? _this2.options.htmlTemplate(data) : undefined,\n            center: center,\n            bbox: bbox,\n            properties: data\n          });\n        }\n\n        cb.call(context, result);\n      });\n    };\n\n    return Nominatim;\n  }();\n  /**\n   * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Nominatim}\n   * @param options the options\n   */\n\n\n  function nominatim(options) {\n    return new Nominatim(options);\n  }\n  /**\n   * Implementation of the [Plus codes](https://plus.codes/) (formerly OpenLocationCode) (requires [open-location-code](https://www.npmjs.com/package/open-location-code))\n   */\n\n\n  var OpenLocationCode = /*#__PURE__*/function () {\n    function OpenLocationCode(options) {\n      L__namespace.Util.setOptions(this, options);\n    }\n\n    var _proto = OpenLocationCode.prototype;\n\n    _proto.geocode = function geocode(query, cb, context) {\n      try {\n        var decoded = this.options.OpenLocationCode.decode(query);\n        var result = {\n          name: query,\n          center: L__namespace.latLng(decoded.latitudeCenter, decoded.longitudeCenter),\n          bbox: L__namespace.latLngBounds(L__namespace.latLng(decoded.latitudeLo, decoded.longitudeLo), L__namespace.latLng(decoded.latitudeHi, decoded.longitudeHi))\n        };\n        cb.call(context, [result]);\n      } catch (e) {\n        console.warn(e); // eslint-disable-line no-console\n\n        cb.call(context, []);\n      }\n    };\n\n    _proto.reverse = function reverse(location, scale, cb, context) {\n      try {\n        var code = this.options.OpenLocationCode.encode(location.lat, location.lng, this.options.codeLength);\n        var result = {\n          name: code,\n          center: L__namespace.latLng(location.lat, location.lng),\n          bbox: L__namespace.latLngBounds(L__namespace.latLng(location.lat, location.lng), L__namespace.latLng(location.lat, location.lng))\n        };\n        cb.call(context, [result]);\n      } catch (e) {\n        console.warn(e); // eslint-disable-line no-console\n\n        cb.call(context, []);\n      }\n    };\n\n    return OpenLocationCode;\n  }();\n  /**\n   * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link OpenLocationCode}\n   * @param options the options\n   */\n\n\n  function openLocationCode(options) {\n    return new OpenLocationCode(options);\n  }\n  /**\n   * Implementation of the [OpenCage Data API](https://opencagedata.com/)\n   */\n\n\n  var OpenCage = /*#__PURE__*/function () {\n    function OpenCage(options) {\n      this.options = {\n        serviceUrl: 'https://api.opencagedata.com/geocode/v1/json'\n      };\n      L__namespace.Util.setOptions(this, options);\n    }\n\n    var _proto = OpenCage.prototype;\n\n    _proto.geocode = function geocode(query, cb, context) {\n      var params = geocodingParams(this.options, {\n        key: this.options.apiKey,\n        q: query\n      });\n      getJSON(this.options.serviceUrl, params, function (data) {\n        var results = [];\n\n        if (data.results && data.results.length) {\n          for (var i = 0; i < data.results.length; i++) {\n            var loc = data.results[i];\n            var center = L__namespace.latLng(loc.geometry);\n            var bbox = void 0;\n\n            if (loc.annotations && loc.annotations.bounds) {\n              bbox = L__namespace.latLngBounds(L__namespace.latLng(loc.annotations.bounds.northeast), L__namespace.latLng(loc.annotations.bounds.southwest));\n            } else {\n              bbox = L__namespace.latLngBounds(center, center);\n            }\n\n            results.push({\n              name: loc.formatted,\n              bbox: bbox,\n              center: center\n            });\n          }\n        }\n\n        cb.call(context, results);\n      });\n    };\n\n    _proto.suggest = function suggest(query, cb, context) {\n      return this.geocode(query, cb, context);\n    };\n\n    _proto.reverse = function reverse(location, scale, cb, context) {\n      var params = reverseParams(this.options, {\n        key: this.options.apiKey,\n        q: [location.lat, location.lng].join(',')\n      });\n      getJSON(this.options.serviceUrl, params, function (data) {\n        var results = [];\n\n        if (data.results && data.results.length) {\n          for (var i = 0; i < data.results.length; i++) {\n            var loc = data.results[i];\n            var center = L__namespace.latLng(loc.geometry);\n            var bbox = void 0;\n\n            if (loc.annotations && loc.annotations.bounds) {\n              bbox = L__namespace.latLngBounds(L__namespace.latLng(loc.annotations.bounds.northeast), L__namespace.latLng(loc.annotations.bounds.southwest));\n            } else {\n              bbox = L__namespace.latLngBounds(center, center);\n            }\n\n            results.push({\n              name: loc.formatted,\n              bbox: bbox,\n              center: center\n            });\n          }\n        }\n\n        cb.call(context, results);\n      });\n    };\n\n    return OpenCage;\n  }();\n\n  function opencage(options) {\n    return new OpenCage(options);\n  }\n  /**\n   * Implementation of the [Pelias](https://pelias.io/), [geocode.earth](https://geocode.earth/) geocoder (formerly Mapzen Search)\n   */\n\n\n  var Pelias = /*#__PURE__*/function () {\n    function Pelias(options) {\n      this.options = {\n        serviceUrl: 'https://api.geocode.earth/v1'\n      };\n      this._lastSuggest = 0;\n      L__namespace.Util.setOptions(this, options);\n    }\n\n    var _proto = Pelias.prototype;\n\n    _proto.geocode = function geocode(query, cb, context) {\n      var _this = this;\n\n      var params = geocodingParams(this.options, {\n        api_key: this.options.apiKey,\n        text: query\n      });\n      getJSON(this.options.serviceUrl + '/search', params, function (data) {\n        cb.call(context, _this._parseResults(data, 'bbox'));\n      });\n    };\n\n    _proto.suggest = function suggest(query, cb, context) {\n      var _this2 = this;\n\n      var params = geocodingParams(this.options, {\n        api_key: this.options.apiKey,\n        text: query\n      });\n      getJSON(this.options.serviceUrl + '/autocomplete', params, function (data) {\n        if (data.geocoding.timestamp > _this2._lastSuggest) {\n          _this2._lastSuggest = data.geocoding.timestamp;\n          cb.call(context, _this2._parseResults(data, 'bbox'));\n        }\n      });\n    };\n\n    _proto.reverse = function reverse(location, scale, cb, context) {\n      var _this3 = this;\n\n      var params = reverseParams(this.options, {\n        api_key: this.options.apiKey,\n        'point.lat': location.lat,\n        'point.lon': location.lng\n      });\n      getJSON(this.options.serviceUrl + '/reverse', params, function (data) {\n        cb.call(context, _this3._parseResults(data, 'bounds'));\n      });\n    };\n\n    _proto._parseResults = function _parseResults(data, bboxname) {\n      var results = [];\n      L__namespace.geoJSON(data, {\n        pointToLayer: function pointToLayer(feature, latlng) {\n          return L__namespace.circleMarker(latlng);\n        },\n        onEachFeature: function onEachFeature(feature, layer) {\n          var result = {};\n          var bbox;\n          var center;\n\n          if (layer.getBounds) {\n            bbox = layer.getBounds();\n            center = bbox.getCenter();\n          } else if (layer.feature.bbox) {\n            center = layer.getLatLng();\n            bbox = L__namespace.latLngBounds(L__namespace.GeoJSON.coordsToLatLng(layer.feature.bbox.slice(0, 2)), L__namespace.GeoJSON.coordsToLatLng(layer.feature.bbox.slice(2, 4)));\n          } else {\n            center = layer.getLatLng();\n            bbox = L__namespace.latLngBounds(center, center);\n          }\n\n          result.name = layer.feature.properties.label;\n          result.center = center;\n          result[bboxname] = bbox;\n          result.properties = layer.feature.properties;\n          results.push(result);\n        }\n      });\n      return results;\n    };\n\n    return Pelias;\n  }();\n  /**\n   * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Pelias}\n   * @param options the options\n   */\n\n\n  function pelias(options) {\n    return new Pelias(options);\n  }\n\n  var GeocodeEarth = Pelias;\n  var geocodeEarth = pelias;\n  /**\n   * r.i.p.\n   * @deprecated\n   */\n\n  var Mapzen = Pelias;\n  /**\n   * r.i.p.\n   * @deprecated\n   */\n\n  var mapzen = pelias;\n  /**\n   * Implementation of the [Openrouteservice](https://openrouteservice.org/dev/#/api-docs/geocode) geocoder\n   */\n\n  var Openrouteservice = /*#__PURE__*/function (_Pelias) {\n    _inheritsLoose(Openrouteservice, _Pelias);\n\n    function Openrouteservice(options) {\n      return _Pelias.call(this, L__namespace.Util.extend({\n        serviceUrl: 'https://api.openrouteservice.org/geocode'\n      }, options)) || this;\n    }\n\n    return Openrouteservice;\n  }(Pelias);\n  /**\n   * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Openrouteservice}\n   * @param options the options\n   */\n\n\n  function openrouteservice(options) {\n    return new Openrouteservice(options);\n  }\n  /**\n   * Implementation of the [Photon](http://photon.komoot.de/) geocoder\n   */\n\n\n  var Photon = /*#__PURE__*/function () {\n    function Photon(options) {\n      this.options = {\n        serviceUrl: 'https://photon.komoot.io/api/',\n        reverseUrl: 'https://photon.komoot.io/reverse/',\n        nameProperties: ['name', 'street', 'suburb', 'hamlet', 'town', 'city', 'state', 'country']\n      };\n      L__namespace.Util.setOptions(this, options);\n    }\n\n    var _proto = Photon.prototype;\n\n    _proto.geocode = function geocode(query, cb, context) {\n      var params = geocodingParams(this.options, {\n        q: query\n      });\n      getJSON(this.options.serviceUrl, params, L__namespace.Util.bind(function (data) {\n        cb.call(context, this._decodeFeatures(data));\n      }, this));\n    };\n\n    _proto.suggest = function suggest(query, cb, context) {\n      return this.geocode(query, cb, context);\n    };\n\n    _proto.reverse = function reverse(latLng, scale, cb, context) {\n      var params = reverseParams(this.options, {\n        lat: latLng.lat,\n        lon: latLng.lng\n      });\n      getJSON(this.options.reverseUrl, params, L__namespace.Util.bind(function (data) {\n        cb.call(context, this._decodeFeatures(data));\n      }, this));\n    };\n\n    _proto._decodeFeatures = function _decodeFeatures(data) {\n      var results = [];\n\n      if (data && data.features) {\n        for (var i = 0; i < data.features.length; i++) {\n          var f = data.features[i];\n          var c = f.geometry.coordinates;\n          var center = L__namespace.latLng(c[1], c[0]);\n          var extent = f.properties.extent;\n          var bbox = extent ? L__namespace.latLngBounds([extent[1], extent[0]], [extent[3], extent[2]]) : L__namespace.latLngBounds(center, center);\n          results.push({\n            name: this._decodeFeatureName(f),\n            html: this.options.htmlTemplate ? this.options.htmlTemplate(f) : undefined,\n            center: center,\n            bbox: bbox,\n            properties: f.properties\n          });\n        }\n      }\n\n      return results;\n    };\n\n    _proto._decodeFeatureName = function _decodeFeatureName(f) {\n      return (this.options.nameProperties || []).map(function (p) {\n        return f.properties[p];\n      }).filter(function (v) {\n        return !!v;\n      }).join(', ');\n    };\n\n    return Photon;\n  }();\n  /**\n   * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Photon}\n   * @param options the options\n   */\n\n\n  function photon(options) {\n    return new Photon(options);\n  }\n  /**\n   * Implementation of the What3Words service\n   */\n\n\n  var What3Words = /*#__PURE__*/function () {\n    function What3Words(options) {\n      this.options = {\n        serviceUrl: 'https://api.what3words.com/v2/'\n      };\n      L__namespace.Util.setOptions(this, options);\n    }\n\n    var _proto = What3Words.prototype;\n\n    _proto.geocode = function geocode(query, cb, context) {\n      //get three words and make a dot based string\n      getJSON(this.options.serviceUrl + 'forward', geocodingParams(this.options, {\n        key: this.options.apiKey,\n        addr: query.split(/\\s+/).join('.')\n      }), function (data) {\n        var results = [];\n\n        if (data.geometry) {\n          var latLng = L__namespace.latLng(data.geometry['lat'], data.geometry['lng']);\n          var latLngBounds = L__namespace.latLngBounds(latLng, latLng);\n          results[0] = {\n            name: data.words,\n            bbox: latLngBounds,\n            center: latLng\n          };\n        }\n\n        cb.call(context, results);\n      });\n    };\n\n    _proto.suggest = function suggest(query, cb, context) {\n      return this.geocode(query, cb, context);\n    };\n\n    _proto.reverse = function reverse(location, scale, cb, context) {\n      getJSON(this.options.serviceUrl + 'reverse', reverseParams(this.options, {\n        key: this.options.apiKey,\n        coords: [location.lat, location.lng].join(',')\n      }), function (data) {\n        var results = [];\n\n        if (data.status.status == 200) {\n          var center = L__namespace.latLng(data.geometry['lat'], data.geometry['lng']);\n          var bbox = L__namespace.latLngBounds(center, center);\n          results[0] = {\n            name: data.words,\n            bbox: bbox,\n            center: center\n          };\n        }\n\n        cb.call(context, results);\n      });\n    };\n\n    return What3Words;\n  }();\n  /**\n   * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link What3Words}\n   * @param options the options\n   */\n\n\n  function what3words(options) {\n    return new What3Words(options);\n  }\n\n  var geocoders = {\n    __proto__: null,\n    geocodingParams: geocodingParams,\n    reverseParams: reverseParams,\n    ArcGis: ArcGis,\n    arcgis: arcgis,\n    Bing: Bing,\n    bing: bing,\n    Google: Google,\n    google: google,\n    HERE: HERE,\n    HEREv2: HEREv2,\n    here: here,\n    parseLatLng: parseLatLng,\n    LatLng: LatLng,\n    latLng: latLng,\n    Mapbox: Mapbox,\n    mapbox: mapbox,\n    MapQuest: MapQuest,\n    mapQuest: mapQuest,\n    Neutrino: Neutrino,\n    neutrino: neutrino,\n    Nominatim: Nominatim,\n    nominatim: nominatim,\n    OpenLocationCode: OpenLocationCode,\n    openLocationCode: openLocationCode,\n    OpenCage: OpenCage,\n    opencage: opencage,\n    Pelias: Pelias,\n    pelias: pelias,\n    GeocodeEarth: GeocodeEarth,\n    geocodeEarth: geocodeEarth,\n    Mapzen: Mapzen,\n    mapzen: mapzen,\n    Openrouteservice: Openrouteservice,\n    openrouteservice: openrouteservice,\n    Photon: Photon,\n    photon: photon,\n    What3Words: What3Words,\n    what3words: what3words\n  };\n  /**\n   * Leaflet mixins https://leafletjs.com/reference-1.7.1.html#class-includes\n   * for TypeScript https://www.typescriptlang.org/docs/handbook/mixins.html\n   * @internal\n   */\n\n  var EventedControl = // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  function EventedControl() {// empty\n  };\n\n  L__namespace.Util.extend(EventedControl.prototype, L__namespace.Control.prototype);\n  L__namespace.Util.extend(EventedControl.prototype, L__namespace.Evented.prototype);\n  /**\n   * This is the geocoder control. It works like any other [Leaflet control](https://leafletjs.com/reference.html#control), and is added to the map.\n   */\n\n  var GeocoderControl = /*#__PURE__*/function (_EventedControl) {\n    _inheritsLoose(GeocoderControl, _EventedControl);\n    /**\n     * Instantiates a geocoder control (to be invoked using `new`)\n     * @param options the options\n     */\n\n\n    function GeocoderControl(options) {\n      var _this;\n\n      _this = _EventedControl.call(this, options) || this;\n      _this.options = {\n        showUniqueResult: true,\n        showResultIcons: false,\n        collapsed: true,\n        expand: 'touch',\n        position: 'topright',\n        placeholder: 'Search...',\n        errorMessage: 'Nothing found.',\n        iconLabel: 'Initiate a new search',\n        query: '',\n        queryMinLength: 1,\n        suggestMinLength: 3,\n        suggestTimeout: 250,\n        defaultMarkGeocode: true\n      };\n      _this._requestCount = 0;\n      L__namespace.Util.setOptions(_assertThisInitialized(_this), options);\n\n      if (!_this.options.geocoder) {\n        _this.options.geocoder = new Nominatim();\n      }\n\n      return _this;\n    }\n\n    var _proto = GeocoderControl.prototype;\n\n    _proto.addThrobberClass = function addThrobberClass() {\n      L__namespace.DomUtil.addClass(this._container, 'leaflet-control-geocoder-throbber');\n    };\n\n    _proto.removeThrobberClass = function removeThrobberClass() {\n      L__namespace.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-throbber');\n    }\n    /**\n     * Returns the container DOM element for the control and add listeners on relevant map events.\n     * @param map the map instance\n     * @see https://leafletjs.com/reference.html#control-onadd\n     */\n    ;\n\n    _proto.onAdd = function onAdd(map) {\n      var _this2 = this;\n\n      var className = 'leaflet-control-geocoder';\n      var container = L__namespace.DomUtil.create('div', className + ' leaflet-bar');\n      var icon = L__namespace.DomUtil.create('button', className + '-icon', container);\n      var form = this._form = L__namespace.DomUtil.create('div', className + '-form', container);\n      this._map = map;\n      this._container = container;\n      icon.innerHTML = '&nbsp;';\n      icon.type = 'button';\n      icon.setAttribute('aria-label', this.options.iconLabel);\n      var input = this._input = L__namespace.DomUtil.create('input', '', form);\n      input.type = 'text';\n      input.value = this.options.query;\n      input.placeholder = this.options.placeholder;\n      L__namespace.DomEvent.disableClickPropagation(input);\n      this._errorElement = L__namespace.DomUtil.create('div', className + '-form-no-error', container);\n      this._errorElement.innerHTML = this.options.errorMessage;\n      this._alts = L__namespace.DomUtil.create('ul', className + '-alternatives leaflet-control-geocoder-alternatives-minimized', container);\n      L__namespace.DomEvent.disableClickPropagation(this._alts);\n      L__namespace.DomEvent.addListener(input, 'keydown', this._keydown, this);\n\n      if (this.options.geocoder.suggest) {\n        L__namespace.DomEvent.addListener(input, 'input', this._change, this);\n      }\n\n      L__namespace.DomEvent.addListener(input, 'blur', function () {\n        if (_this2.options.collapsed && !_this2._preventBlurCollapse) {\n          _this2._collapse();\n        }\n\n        _this2._preventBlurCollapse = false;\n      });\n\n      if (this.options.collapsed) {\n        if (this.options.expand === 'click') {\n          L__namespace.DomEvent.addListener(container, 'click', function (e) {\n            if (e.button === 0 && e.detail !== 2) {\n              _this2._toggle();\n            }\n          });\n        } else if (this.options.expand === 'touch') {\n          L__namespace.DomEvent.addListener(container, L__namespace.Browser.touch ? 'touchstart mousedown' : 'mousedown', function (e) {\n            _this2._toggle();\n\n            e.preventDefault(); // mobile: clicking focuses the icon, so UI expands and immediately collapses\n\n            e.stopPropagation();\n          }, this);\n        } else {\n          L__namespace.DomEvent.addListener(container, 'mouseover', this._expand, this);\n          L__namespace.DomEvent.addListener(container, 'mouseout', this._collapse, this);\n\n          this._map.on('movestart', this._collapse, this);\n        }\n      } else {\n        this._expand();\n\n        if (L__namespace.Browser.touch) {\n          L__namespace.DomEvent.addListener(container, 'touchstart', function () {\n            return _this2._geocode();\n          });\n        } else {\n          L__namespace.DomEvent.addListener(container, 'click', function () {\n            return _this2._geocode();\n          });\n        }\n      }\n\n      if (this.options.defaultMarkGeocode) {\n        this.on('markgeocode', this.markGeocode, this);\n      }\n\n      this.on('startgeocode', this.addThrobberClass, this);\n      this.on('finishgeocode', this.removeThrobberClass, this);\n      this.on('startsuggest', this.addThrobberClass, this);\n      this.on('finishsuggest', this.removeThrobberClass, this);\n      L__namespace.DomEvent.disableClickPropagation(container);\n      return container;\n    }\n    /**\n     * Sets the query string on the text input\n     * @param string the query string\n     */\n    ;\n\n    _proto.setQuery = function setQuery(string) {\n      this._input.value = string;\n      return this;\n    };\n\n    _proto._geocodeResult = function _geocodeResult(results, suggest) {\n      if (!suggest && this.options.showUniqueResult && results.length === 1) {\n        this._geocodeResultSelected(results[0]);\n      } else if (results.length > 0) {\n        this._alts.innerHTML = '';\n        this._results = results;\n        L__namespace.DomUtil.removeClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n        L__namespace.DomUtil.addClass(this._container, 'leaflet-control-geocoder-options-open');\n\n        for (var i = 0; i < results.length; i++) {\n          this._alts.appendChild(this._createAlt(results[i], i));\n        }\n      } else {\n        L__namespace.DomUtil.addClass(this._container, 'leaflet-control-geocoder-options-error');\n        L__namespace.DomUtil.addClass(this._errorElement, 'leaflet-control-geocoder-error');\n      }\n    }\n    /**\n     * Marks a geocoding result on the map\n     * @param result the geocoding result\n     */\n    ;\n\n    _proto.markGeocode = function markGeocode(event) {\n      var result = event.geocode;\n\n      this._map.fitBounds(result.bbox);\n\n      if (this._geocodeMarker) {\n        this._map.removeLayer(this._geocodeMarker);\n      }\n\n      this._geocodeMarker = new L__namespace.Marker(result.center).bindPopup(result.html || result.name).addTo(this._map).openPopup();\n      return this;\n    };\n\n    _proto._geocode = function _geocode(suggest) {\n      var _this3 = this;\n\n      var value = this._input.value;\n\n      if (!suggest && value.length < this.options.queryMinLength) {\n        return;\n      }\n\n      var requestCount = ++this._requestCount;\n\n      var cb = function cb(results) {\n        if (requestCount === _this3._requestCount) {\n          var _event = {\n            input: value,\n            results: results\n          };\n\n          _this3.fire(suggest ? 'finishsuggest' : 'finishgeocode', _event);\n\n          _this3._geocodeResult(results, suggest);\n        }\n      };\n\n      this._lastGeocode = value;\n\n      if (!suggest) {\n        this._clearResults();\n      }\n\n      var event = {\n        input: value\n      };\n      this.fire(suggest ? 'startsuggest' : 'startgeocode', event);\n\n      if (suggest) {\n        this.options.geocoder.suggest(value, cb);\n      } else {\n        this.options.geocoder.geocode(value, cb);\n      }\n    };\n\n    _proto._geocodeResultSelected = function _geocodeResultSelected(geocode) {\n      var event = {\n        geocode: geocode\n      };\n      this.fire('markgeocode', event);\n    };\n\n    _proto._toggle = function _toggle() {\n      if (L__namespace.DomUtil.hasClass(this._container, 'leaflet-control-geocoder-expanded')) {\n        this._collapse();\n      } else {\n        this._expand();\n      }\n    };\n\n    _proto._expand = function _expand() {\n      L__namespace.DomUtil.addClass(this._container, 'leaflet-control-geocoder-expanded');\n\n      this._input.select();\n\n      this.fire('expand');\n    };\n\n    _proto._collapse = function _collapse() {\n      L__namespace.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-expanded');\n      L__namespace.DomUtil.addClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n      L__namespace.DomUtil.removeClass(this._errorElement, 'leaflet-control-geocoder-error');\n      L__namespace.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-options-open');\n      L__namespace.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-options-error');\n\n      this._input.blur(); // mobile: keyboard shouldn't stay expanded\n\n\n      this.fire('collapse');\n    };\n\n    _proto._clearResults = function _clearResults() {\n      L__namespace.DomUtil.addClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n      this._selection = null;\n      L__namespace.DomUtil.removeClass(this._errorElement, 'leaflet-control-geocoder-error');\n      L__namespace.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-options-open');\n      L__namespace.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-options-error');\n    };\n\n    _proto._createAlt = function _createAlt(result, index) {\n      var _this4 = this;\n\n      var li = L__namespace.DomUtil.create('li', ''),\n          a = L__namespace.DomUtil.create('a', '', li),\n          icon = this.options.showResultIcons && result.icon ? L__namespace.DomUtil.create('img', '', a) : null,\n          text = result.html ? undefined : document.createTextNode(result.name),\n          mouseDownHandler = function mouseDownHandler(e) {\n        // In some browsers, a click will fire on the map if the control is\n        // collapsed directly after mousedown. To work around this, we\n        // wait until the click is completed, and _then_ collapse the\n        // control. Messy, but this is the workaround I could come up with\n        // for #142.\n        _this4._preventBlurCollapse = true;\n        L__namespace.DomEvent.stop(e);\n\n        _this4._geocodeResultSelected(result);\n\n        L__namespace.DomEvent.on(li, 'click touchend', function () {\n          if (_this4.options.collapsed) {\n            _this4._collapse();\n          } else {\n            _this4._clearResults();\n          }\n        });\n      };\n\n      if (icon) {\n        icon.src = result.icon;\n      }\n\n      li.setAttribute('data-result-index', String(index));\n\n      if (result.html) {\n        a.innerHTML = a.innerHTML + result.html;\n      } else if (text) {\n        a.appendChild(text);\n      } // Use mousedown and not click, since click will fire _after_ blur,\n      // causing the control to have collapsed and removed the items\n      // before the click can fire.\n\n\n      L__namespace.DomEvent.addListener(li, 'mousedown touchstart', mouseDownHandler, this);\n      return li;\n    };\n\n    _proto._keydown = function _keydown(e) {\n      var _this5 = this;\n\n      var select = function select(dir) {\n        if (_this5._selection) {\n          L__namespace.DomUtil.removeClass(_this5._selection, 'leaflet-control-geocoder-selected');\n          _this5._selection = _this5._selection[dir > 0 ? 'nextSibling' : 'previousSibling'];\n        }\n\n        if (!_this5._selection) {\n          _this5._selection = _this5._alts[dir > 0 ? 'firstChild' : 'lastChild'];\n        }\n\n        if (_this5._selection) {\n          L__namespace.DomUtil.addClass(_this5._selection, 'leaflet-control-geocoder-selected');\n        }\n      };\n\n      switch (e.keyCode) {\n        // Escape\n        case 27:\n          if (this.options.collapsed) {\n            this._collapse();\n          } else {\n            this._clearResults();\n          }\n\n          break;\n        // Up\n\n        case 38:\n          select(-1);\n          break;\n        // Up\n\n        case 40:\n          select(1);\n          break;\n        // Enter\n\n        case 13:\n          if (this._selection) {\n            var index = parseInt(this._selection.getAttribute('data-result-index'), 10);\n\n            this._geocodeResultSelected(this._results[index]);\n\n            this._clearResults();\n          } else {\n            this._geocode();\n          }\n\n          break;\n\n        default:\n          return;\n      }\n\n      L__namespace.DomEvent.preventDefault(e);\n    };\n\n    _proto._change = function _change() {\n      var _this6 = this;\n\n      var v = this._input.value;\n\n      if (v !== this._lastGeocode) {\n        clearTimeout(this._suggestTimeout);\n\n        if (v.length >= this.options.suggestMinLength) {\n          this._suggestTimeout = setTimeout(function () {\n            return _this6._geocode(true);\n          }, this.options.suggestTimeout);\n        } else {\n          this._clearResults();\n        }\n      }\n    };\n\n    return GeocoderControl;\n  }(EventedControl);\n  /**\n   * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link GeocoderControl}\n   * @param options the options\n   */\n\n\n  function geocoder(options) {\n    return new GeocoderControl(options);\n  }\n  /* @preserve\n   * Leaflet Control Geocoder\n   * https://github.com/perliedman/leaflet-control-geocoder\n   *\n   * Copyright (c) 2012 sa3m (https://github.com/sa3m)\n   * Copyright (c) 2018 Per Liedman\n   * All rights reserved.\n   */\n\n\n  L__namespace.Util.extend(GeocoderControl, geocoders);\n  L__namespace.Util.extend(L__namespace.Control, {\n    Geocoder: GeocoderControl,\n    geocoder: geocoder\n  });\n  exports.Geocoder = GeocoderControl;\n  exports[\"default\"] = GeocoderControl;\n  exports.geocoder = geocoder;\n  exports.geocoders = geocoders;\n  return exports;\n}({}, L);","map":{"version":3,"names":["leafletControlGeocoder","exports","L","_interopNamespace","e","__esModule","n","Object","create","keys","forEach","k","d","getOwnPropertyDescriptor","defineProperty","get","enumerable","L__namespace","_inheritsLoose","subClass","superClass","prototype","constructor","__proto__","_assertThisInitialized","self","ReferenceError","geocodingParams","options","params","Util","extend","geocodingQueryParams","reverseParams","reverseQueryParams","lastCallbackId","badChars","possible","escape","escapeChar","chr","htmlEscape","string","test","replace","jsonp","url","callback","context","jsonpParam","callbackId","window","bind","script","document","createElement","type","src","getParamString","id","getElementsByTagName","appendChild","getJSON","xmlHttp","XMLHttpRequest","onreadystatechange","readyState","message","status","response","JSON","parse","open","responseType","setRequestHeader","send","template","str","data","key","value","undefined","obj","existingUrl","uppercase","i","encodeURIComponent","toUpperCase","Array","isArray","push","String","j","length","indexOf","join","ArcGis","serviceUrl","apiKey","setOptions","_proto","geocode","query","cb","token","SingleLine","outFields","forStorage","maxLocations","f","results","candidates","loc","latLng","location","y","x","latLngBounds","extent","ymax","xmax","ymin","xmin","name","address","bbox","center","call","suggest","reverse","scale","lng","lat","distance","result","error","Match_addr","arcgis","Bing","resourceSets","resources","resource","point","coordinates","bing","Google","geometry","viewport","northeast","southwest","formatted_address","properties","address_components","latlng","google","HERE","app_id","app_code","maxResults","Error","searchtext","gen","jsonattributes","maxresults","prox","reverseGeocodeProxRadius","mode","getJSON$1","view","displayPosition","latitude","longitude","mapView","topLeft","bottomRight","label","HEREv2","_proto2","q","limit","at","items","item","position","south","west","north","east","here","parseLatLng","match","LatLng","next","sizeInMeters","toBounds","Mapbox","_getProperties","text","split","short_code","_this","access_token","proximity","features","slice","place_name","_this2","param","mapbox","MapQuest","decodeURIComponent","_formatName","arguments","filter","s","outFormat","locations","street","adminArea4","adminArea3","adminArea1","outputFormat","mapQuest","Neutrino","userId","found","neutrino","Nominatim","htmlTemplate","r","className","parts","road","building","city","town","village","hamlet","state","country","format","addressdetails","boundingbox","icon","display_name","html","lon","zoom","Math","round","log","nominatim","OpenLocationCode","decoded","decode","latitudeCenter","longitudeCenter","latitudeLo","longitudeLo","latitudeHi","longitudeHi","console","warn","code","encode","codeLength","openLocationCode","OpenCage","annotations","bounds","formatted","opencage","Pelias","_lastSuggest","api_key","_parseResults","geocoding","timestamp","_this3","bboxname","geoJSON","pointToLayer","feature","circleMarker","onEachFeature","layer","getBounds","getCenter","getLatLng","GeoJSON","coordsToLatLng","pelias","GeocodeEarth","geocodeEarth","Mapzen","mapzen","Openrouteservice","_Pelias","openrouteservice","Photon","reverseUrl","nameProperties","_decodeFeatures","c","_decodeFeatureName","map","p","v","photon","What3Words","addr","words","coords","what3words","geocoders","EventedControl","Control","Evented","GeocoderControl","_EventedControl","showUniqueResult","showResultIcons","collapsed","expand","placeholder","errorMessage","iconLabel","queryMinLength","suggestMinLength","suggestTimeout","defaultMarkGeocode","_requestCount","geocoder","addThrobberClass","DomUtil","addClass","_container","removeThrobberClass","removeClass","onAdd","container","form","_form","_map","innerHTML","setAttribute","input","_input","DomEvent","disableClickPropagation","_errorElement","_alts","addListener","_keydown","_change","_preventBlurCollapse","_collapse","button","detail","_toggle","Browser","touch","preventDefault","stopPropagation","_expand","on","_geocode","markGeocode","setQuery","_geocodeResult","_geocodeResultSelected","_results","_createAlt","event","fitBounds","_geocodeMarker","removeLayer","Marker","bindPopup","addTo","openPopup","requestCount","_event","fire","_lastGeocode","_clearResults","hasClass","select","blur","_selection","index","_this4","li","a","createTextNode","mouseDownHandler","stop","_this5","dir","keyCode","parseInt","getAttribute","_this6","clearTimeout","_suggestTimeout","setTimeout","Geocoder"],"sources":["/home/guaro/Scrivania/ASSI/Spacebook/app/javascript/packs/Control.Geocoder.js"],"sourcesContent":["var leafletControlGeocoder = (function (exports, L) {\n\n    function _interopNamespace(e) {\n      if (e && e.__esModule) return e;\n      var n = Object.create(null);\n      if (e) {\n        Object.keys(e).forEach(function (k) {\n          if (k !== 'default') {\n            var d = Object.getOwnPropertyDescriptor(e, k);\n            Object.defineProperty(n, k, d.get ? d : {\n              enumerable: true,\n              get: function () {\n                return e[k];\n              }\n            });\n          }\n        });\n      }\n      n['default'] = e;\n      return n;\n    }\n  \n    var L__namespace = /*#__PURE__*/_interopNamespace(L);\n  \n    function _inheritsLoose(subClass, superClass) {\n      subClass.prototype = Object.create(superClass.prototype);\n      subClass.prototype.constructor = subClass;\n      subClass.__proto__ = superClass;\n    }\n  \n    function _assertThisInitialized(self) {\n      if (self === void 0) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n  \n      return self;\n    }\n  \n    /**\n     * @internal\n     */\n  \n    function geocodingParams(options, params) {\n      return L__namespace.Util.extend(params, options.geocodingQueryParams);\n    }\n    /**\n     * @internal\n     */\n  \n    function reverseParams(options, params) {\n      return L__namespace.Util.extend(params, options.reverseQueryParams);\n    }\n  \n    /**\n     * @internal\n     */\n  \n    var lastCallbackId = 0; // Adapted from handlebars.js\n    // https://github.com/wycats/handlebars.js/\n  \n    /**\n     * @internal\n     */\n  \n    var badChars = /[&<>\"'`]/g;\n    /**\n     * @internal\n     */\n  \n    var possible = /[&<>\"'`]/;\n    /**\n     * @internal\n     */\n  \n    var escape = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#x27;',\n      '`': '&#x60;'\n    };\n    /**\n     * @internal\n     */\n  \n    function escapeChar(chr) {\n      return escape[chr];\n    }\n    /**\n     * @internal\n     */\n  \n  \n    function htmlEscape(string) {\n      if (string == null) {\n        return '';\n      } else if (!string) {\n        return string + '';\n      } // Force a string conversion as this will be done by the append regardless and\n      // the regex test will do this transparently behind the scenes, causing issues if\n      // an object's to string has escaped characters in it.\n  \n  \n      string = '' + string;\n  \n      if (!possible.test(string)) {\n        return string;\n      }\n  \n      return string.replace(badChars, escapeChar);\n    }\n    /**\n     * @internal\n     */\n  \n    function jsonp(url, params, callback, context, jsonpParam) {\n      var callbackId = '_l_geocoder_' + lastCallbackId++;\n      params[jsonpParam || 'callback'] = callbackId;\n      window[callbackId] = L__namespace.Util.bind(callback, context);\n      var script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.src = url + getParamString(params);\n      script.id = callbackId;\n      document.getElementsByTagName('head')[0].appendChild(script);\n    }\n    /**\n     * @internal\n     */\n  \n    function getJSON(url, params, callback) {\n      var xmlHttp = new XMLHttpRequest();\n  \n      xmlHttp.onreadystatechange = function () {\n        if (xmlHttp.readyState !== 4) {\n          return;\n        }\n  \n        var message;\n  \n        if (xmlHttp.status !== 200 && xmlHttp.status !== 304) {\n          message = '';\n        } else if (typeof xmlHttp.response === 'string') {\n          // IE doesn't parse JSON responses even with responseType: 'json'.\n          try {\n            message = JSON.parse(xmlHttp.response);\n          } catch (e) {\n            // Not a JSON response\n            message = xmlHttp.response;\n          }\n        } else {\n          message = xmlHttp.response;\n        }\n  \n        callback(message);\n      };\n  \n      xmlHttp.open('GET', url + getParamString(params), true);\n      xmlHttp.responseType = 'json';\n      xmlHttp.setRequestHeader('Accept', 'application/json');\n      xmlHttp.send(null);\n    }\n    /**\n     * @internal\n     */\n  \n    function template(str, data) {\n      return str.replace(/\\{ *([\\w_]+) *\\}/g, function (str, key) {\n        var value = data[key];\n  \n        if (value === undefined) {\n          value = '';\n        } else if (typeof value === 'function') {\n          value = value(data);\n        }\n  \n        return htmlEscape(value);\n      });\n    }\n    /**\n     * @internal\n     */\n  \n    function getParamString(obj, existingUrl, uppercase) {\n      var params = [];\n  \n      for (var i in obj) {\n        var key = encodeURIComponent(uppercase ? i.toUpperCase() : i);\n        var value = obj[i];\n  \n        if (!Array.isArray(value)) {\n          params.push(key + '=' + encodeURIComponent(String(value)));\n        } else {\n          for (var j = 0; j < value.length; j++) {\n            params.push(key + '=' + encodeURIComponent(value[j]));\n          }\n        }\n      }\n  \n      return (!existingUrl || existingUrl.indexOf('?') === -1 ? '?' : '&') + params.join('&');\n    }\n  \n    /**\n     * Implementation of the [ArcGIS geocoder](https://developers.arcgis.com/features/geocoding/)\n     */\n  \n    var ArcGis = /*#__PURE__*/function () {\n      function ArcGis(options) {\n        this.options = {\n          serviceUrl: 'https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer',\n          apiKey: ''\n        };\n        L__namespace.Util.setOptions(this, options);\n      }\n  \n      var _proto = ArcGis.prototype;\n  \n      _proto.geocode = function geocode(query, cb, context) {\n        var params = geocodingParams(this.options, {\n          token: this.options.apiKey,\n          SingleLine: query,\n          outFields: 'Addr_Type',\n          forStorage: false,\n          maxLocations: 10,\n          f: 'json'\n        });\n        getJSON(this.options.serviceUrl + '/findAddressCandidates', params, function (data) {\n          var results = [];\n  \n          if (data.candidates && data.candidates.length) {\n            for (var i = 0; i <= data.candidates.length - 1; i++) {\n              var loc = data.candidates[i];\n              var latLng = L__namespace.latLng(loc.location.y, loc.location.x);\n              var latLngBounds = L__namespace.latLngBounds(L__namespace.latLng(loc.extent.ymax, loc.extent.xmax), L__namespace.latLng(loc.extent.ymin, loc.extent.xmin));\n              results[i] = {\n                name: loc.address,\n                bbox: latLngBounds,\n                center: latLng\n              };\n            }\n          }\n  \n          cb.call(context, results);\n        });\n      };\n  \n      _proto.suggest = function suggest(query, cb, context) {\n        return this.geocode(query, cb, context);\n      };\n  \n      _proto.reverse = function reverse(location, scale, cb, context) {\n        var params = reverseParams(this.options, {\n          location: location.lng + ',' + location.lat,\n          distance: 100,\n          f: 'json'\n        });\n        getJSON(this.options.serviceUrl + '/reverseGeocode', params, function (data) {\n          var result = [];\n  \n          if (data && !data.error) {\n            var center = L__namespace.latLng(data.location.y, data.location.x);\n            var bbox = L__namespace.latLngBounds(center, center);\n            result.push({\n              name: data.address.Match_addr,\n              center: center,\n              bbox: bbox\n            });\n          }\n  \n          cb.call(context, result);\n        });\n      };\n  \n      return ArcGis;\n    }();\n    /**\n     * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link ArcGis}\n     * @param options the options\n     */\n  \n    function arcgis(options) {\n      return new ArcGis(options);\n    }\n  \n    /**\n     * Implementation of the [Bing Locations API](https://docs.microsoft.com/en-us/bingmaps/rest-services/locations/)\n     */\n  \n    var Bing = /*#__PURE__*/function () {\n      function Bing(options) {\n        this.options = {\n          serviceUrl: 'https://dev.virtualearth.net/REST/v1/Locations'\n        };\n        L__namespace.Util.setOptions(this, options);\n      }\n  \n      var _proto = Bing.prototype;\n  \n      _proto.geocode = function geocode(query, cb, context) {\n        var params = geocodingParams(this.options, {\n          query: query,\n          key: this.options.apiKey\n        });\n        jsonp(this.options.apiKey, params, function (data) {\n          var results = [];\n  \n          if (data.resourceSets.length > 0) {\n            for (var i = data.resourceSets[0].resources.length - 1; i >= 0; i--) {\n              var resource = data.resourceSets[0].resources[i],\n                  bbox = resource.bbox;\n              results[i] = {\n                name: resource.name,\n                bbox: L__namespace.latLngBounds([bbox[0], bbox[1]], [bbox[2], bbox[3]]),\n                center: L__namespace.latLng(resource.point.coordinates)\n              };\n            }\n          }\n  \n          cb.call(context, results);\n        }, this, 'jsonp');\n      };\n  \n      _proto.reverse = function reverse(location, scale, cb, context) {\n        var params = reverseParams(this.options, {\n          key: this.options.apiKey\n        });\n        jsonp(this.options.serviceUrl + location.lat + ',' + location.lng, params, function (data) {\n          var results = [];\n  \n          for (var i = data.resourceSets[0].resources.length - 1; i >= 0; i--) {\n            var resource = data.resourceSets[0].resources[i],\n                bbox = resource.bbox;\n            results[i] = {\n              name: resource.name,\n              bbox: L__namespace.latLngBounds([bbox[0], bbox[1]], [bbox[2], bbox[3]]),\n              center: L__namespace.latLng(resource.point.coordinates)\n            };\n          }\n  \n          cb.call(context, results);\n        }, this, 'jsonp');\n      };\n  \n      return Bing;\n    }();\n    /**\n     * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Bing}\n     * @param options the options\n     */\n  \n    function bing(options) {\n      return new Bing(options);\n    }\n  \n    var Google = /*#__PURE__*/function () {\n      function Google(options) {\n        this.options = {\n          serviceUrl: 'https://maps.googleapis.com/maps/api/geocode/json'\n        };\n        L__namespace.Util.setOptions(this, options);\n      }\n  \n      var _proto = Google.prototype;\n  \n      _proto.geocode = function geocode(query, cb, context) {\n        var params = geocodingParams(this.options, {\n          key: this.options.apiKey,\n          address: query\n        });\n        getJSON(this.options.serviceUrl, params, function (data) {\n          var results = [];\n  \n          if (data.results && data.results.length) {\n            for (var i = 0; i <= data.results.length - 1; i++) {\n              var loc = data.results[i];\n              var latLng = L__namespace.latLng(loc.geometry.location);\n              var latLngBounds = L__namespace.latLngBounds(L__namespace.latLng(loc.geometry.viewport.northeast), L__namespace.latLng(loc.geometry.viewport.southwest));\n              results[i] = {\n                name: loc.formatted_address,\n                bbox: latLngBounds,\n                center: latLng,\n                properties: loc.address_components\n              };\n            }\n          }\n  \n          cb.call(context, results);\n        });\n      };\n  \n      _proto.reverse = function reverse(location, scale, cb, context) {\n        var params = reverseParams(this.options, {\n          key: this.options.apiKey,\n          latlng: location.lat + ',' + location.lng\n        });\n        getJSON(this.options.serviceUrl, params, function (data) {\n          var results = [];\n  \n          if (data.results && data.results.length) {\n            for (var i = 0; i <= data.results.length - 1; i++) {\n              var loc = data.results[i];\n              var center = L__namespace.latLng(loc.geometry.location);\n              var bbox = L__namespace.latLngBounds(L__namespace.latLng(loc.geometry.viewport.northeast), L__namespace.latLng(loc.geometry.viewport.southwest));\n              results[i] = {\n                name: loc.formatted_address,\n                bbox: bbox,\n                center: center,\n                properties: loc.address_components\n              };\n            }\n          }\n  \n          cb.call(context, results);\n        });\n      };\n  \n      return Google;\n    }();\n    /**\n     * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Google}\n     * @param options the options\n     */\n  \n    function google(options) {\n      return new Google(options);\n    }\n  \n    /**\n     * Implementation of the [HERE Geocoder API](https://developer.here.com/documentation/geocoder/topics/introduction.html)\n     */\n  \n    var HERE = /*#__PURE__*/function () {\n      function HERE(options) {\n        this.options = {\n          serviceUrl: 'https://geocoder.api.here.com/6.2/',\n          app_id: '',\n          app_code: '',\n          apiKey: '',\n          maxResults: 5\n        };\n        L__namespace.Util.setOptions(this, options);\n        if (options.apiKey) throw Error('apiKey is not supported, use app_id/app_code instead!');\n      }\n  \n      var _proto = HERE.prototype;\n  \n      _proto.geocode = function geocode(query, cb, context) {\n        var params = geocodingParams(this.options, {\n          searchtext: query,\n          gen: 9,\n          app_id: this.options.app_id,\n          app_code: this.options.app_code,\n          jsonattributes: 1,\n          maxresults: this.options.maxResults\n        });\n        this.getJSON(this.options.serviceUrl + 'geocode.json', params, cb, context);\n      };\n  \n      _proto.reverse = function reverse(location, scale, cb, context) {\n        var prox = location.lat + ',' + location.lng;\n  \n        if (this.options.reverseGeocodeProxRadius) {\n          prox += ',' + this.options.reverseGeocodeProxRadius;\n        }\n  \n        var params = reverseParams(this.options, {\n          prox: prox,\n          mode: 'retrieveAddresses',\n          app_id: this.options.app_id,\n          app_code: this.options.app_code,\n          gen: 9,\n          jsonattributes: 1,\n          maxresults: this.options.maxResults\n        });\n        this.getJSON(this.options.serviceUrl + 'reversegeocode.json', params, cb, context);\n      };\n  \n      _proto.getJSON = function getJSON$1(url, params, cb, context) {\n        getJSON(url, params, function (data) {\n          var results = [];\n  \n          if (data.response.view && data.response.view.length) {\n            for (var i = 0; i <= data.response.view[0].result.length - 1; i++) {\n              var loc = data.response.view[0].result[i].location;\n              var center = L__namespace.latLng(loc.displayPosition.latitude, loc.displayPosition.longitude);\n              var bbox = L__namespace.latLngBounds(L__namespace.latLng(loc.mapView.topLeft.latitude, loc.mapView.topLeft.longitude), L__namespace.latLng(loc.mapView.bottomRight.latitude, loc.mapView.bottomRight.longitude));\n              results[i] = {\n                name: loc.address.label,\n                properties: loc.address,\n                bbox: bbox,\n                center: center\n              };\n            }\n          }\n  \n          cb.call(context, results);\n        });\n      };\n  \n      return HERE;\n    }();\n    /**\n     * Implementation of the new [HERE Geocoder API](https://developer.here.com/documentation/geocoding-search-api/api-reference-swagger.html)\n     */\n  \n    var HEREv2 = /*#__PURE__*/function () {\n      function HEREv2(options) {\n        this.options = {\n          serviceUrl: 'https://geocode.search.hereapi.com/v1',\n          apiKey: '',\n          app_id: '',\n          app_code: '',\n          maxResults: 10\n        };\n        L__namespace.Util.setOptions(this, options);\n      }\n  \n      var _proto2 = HEREv2.prototype;\n  \n      _proto2.geocode = function geocode(query, cb, context) {\n        var params = geocodingParams(this.options, {\n          q: query,\n          apiKey: this.options.apiKey,\n          limit: this.options.maxResults\n        });\n  \n        if (!params.at && !params[\"in\"]) {\n          throw Error('at / in parameters not found. Please define coordinates (at=latitude,longitude) or other (in) in your geocodingQueryParams.');\n        }\n  \n        this.getJSON(this.options.serviceUrl + '/discover', params, cb, context);\n      };\n  \n      _proto2.reverse = function reverse(location, scale, cb, context) {\n        var params = reverseParams(this.options, {\n          at: location.lat + ',' + location.lng,\n          limit: this.options.reverseGeocodeProxRadius,\n          apiKey: this.options.apiKey\n        });\n        this.getJSON(this.options.serviceUrl + '/revgeocode', params, cb, context);\n      };\n  \n      _proto2.getJSON = function getJSON$1(url, params, cb, context) {\n        getJSON(url, params, function (data) {\n          var results = [];\n  \n          if (data.items && data.items.length) {\n            for (var i = 0; i <= data.items.length - 1; i++) {\n              var item = data.items[i];\n              var latLng = L__namespace.latLng(item.position.lat, item.position.lng);\n              var bbox = void 0;\n  \n              if (item.mapView) {\n                bbox = L__namespace.latLngBounds(L__namespace.latLng(item.mapView.south, item.mapView.west), L__namespace.latLng(item.mapView.north, item.mapView.east));\n              } else {\n                // Using only position when not provided\n                bbox = L__namespace.latLngBounds(L__namespace.latLng(item.position.lat, item.position.lng), L__namespace.latLng(item.position.lat, item.position.lng));\n              }\n  \n              results[i] = {\n                name: item.address.label,\n                properties: item.address,\n                bbox: bbox,\n                center: latLng\n              };\n            }\n          }\n  \n          cb.call(context, results);\n        });\n      };\n  \n      return HEREv2;\n    }();\n    /**\n     * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link HERE}\n     * @param options the options\n     */\n  \n    function here(options) {\n      if (options.apiKey) {\n        return new HEREv2(options);\n      } else {\n        return new HERE(options);\n      }\n    }\n  \n    /**\n     * Parses basic latitude/longitude strings such as `'50.06773 14.37742'`, `'N50.06773 W14.37742'`, `'S 50° 04.064 E 014° 22.645'`, or `'S 50° 4′ 03.828″, W 14° 22′ 38.712″'`\n     * @param query the latitude/longitude string to parse\n     * @returns the parsed latitude/longitude\n     */\n  \n    function parseLatLng(query) {\n      var match; // regex from https://github.com/openstreetmap/openstreetmap-website/blob/master/app/controllers/geocoder_controller.rb\n  \n      if (match = query.match(/^([NS])\\s*(\\d{1,3}(?:\\.\\d*)?)\\W*([EW])\\s*(\\d{1,3}(?:\\.\\d*)?)$/)) {\n        // [NSEW] decimal degrees\n        return L__namespace.latLng((/N/i.test(match[1]) ? 1 : -1) * +match[2], (/E/i.test(match[3]) ? 1 : -1) * +match[4]);\n      } else if (match = query.match(/^(\\d{1,3}(?:\\.\\d*)?)\\s*([NS])\\W*(\\d{1,3}(?:\\.\\d*)?)\\s*([EW])$/)) {\n        // decimal degrees [NSEW]\n        return L__namespace.latLng((/N/i.test(match[2]) ? 1 : -1) * +match[1], (/E/i.test(match[4]) ? 1 : -1) * +match[3]);\n      } else if (match = query.match(/^([NS])\\s*(\\d{1,3})°?\\s*(\\d{1,3}(?:\\.\\d*)?)?['′]?\\W*([EW])\\s*(\\d{1,3})°?\\s*(\\d{1,3}(?:\\.\\d*)?)?['′]?$/)) {\n        // [NSEW] degrees, decimal minutes\n        return L__namespace.latLng((/N/i.test(match[1]) ? 1 : -1) * (+match[2] + +match[3] / 60), (/E/i.test(match[4]) ? 1 : -1) * (+match[5] + +match[6] / 60));\n      } else if (match = query.match(/^(\\d{1,3})°?\\s*(\\d{1,3}(?:\\.\\d*)?)?['′]?\\s*([NS])\\W*(\\d{1,3})°?\\s*(\\d{1,3}(?:\\.\\d*)?)?['′]?\\s*([EW])$/)) {\n        // degrees, decimal minutes [NSEW]\n        return L__namespace.latLng((/N/i.test(match[3]) ? 1 : -1) * (+match[1] + +match[2] / 60), (/E/i.test(match[6]) ? 1 : -1) * (+match[4] + +match[5] / 60));\n      } else if (match = query.match(/^([NS])\\s*(\\d{1,3})°?\\s*(\\d{1,2})['′]?\\s*(\\d{1,3}(?:\\.\\d*)?)?[\"″]?\\W*([EW])\\s*(\\d{1,3})°?\\s*(\\d{1,2})['′]?\\s*(\\d{1,3}(?:\\.\\d*)?)?[\"″]?$/)) {\n        // [NSEW] degrees, minutes, decimal seconds\n        return L__namespace.latLng((/N/i.test(match[1]) ? 1 : -1) * (+match[2] + +match[3] / 60 + +match[4] / 3600), (/E/i.test(match[5]) ? 1 : -1) * (+match[6] + +match[7] / 60 + +match[8] / 3600));\n      } else if (match = query.match(/^(\\d{1,3})°?\\s*(\\d{1,2})['′]?\\s*(\\d{1,3}(?:\\.\\d*)?)?[\"″]\\s*([NS])\\W*(\\d{1,3})°?\\s*(\\d{1,2})['′]?\\s*(\\d{1,3}(?:\\.\\d*)?)?[\"″]?\\s*([EW])$/)) {\n        // degrees, minutes, decimal seconds [NSEW]\n        return L__namespace.latLng((/N/i.test(match[4]) ? 1 : -1) * (+match[1] + +match[2] / 60 + +match[3] / 3600), (/E/i.test(match[8]) ? 1 : -1) * (+match[5] + +match[6] / 60 + +match[7] / 3600));\n      } else if (match = query.match(/^\\s*([+-]?\\d+(?:\\.\\d*)?)\\s*[\\s,]\\s*([+-]?\\d+(?:\\.\\d*)?)\\s*$/)) {\n        return L__namespace.latLng(+match[1], +match[2]);\n      }\n    }\n    /**\n     * Parses basic latitude/longitude strings such as `'50.06773 14.37742'`, `'N50.06773 W14.37742'`, `'S 50° 04.064 E 014° 22.645'`, or `'S 50° 4′ 03.828″, W 14° 22′ 38.712″'`\n     */\n  \n    var LatLng = /*#__PURE__*/function () {\n      function LatLng(options) {\n        this.options = {\n          next: undefined,\n          sizeInMeters: 10000\n        };\n        L__namespace.Util.setOptions(this, options);\n      }\n  \n      var _proto = LatLng.prototype;\n  \n      _proto.geocode = function geocode(query, cb, context) {\n        var center = parseLatLng(query);\n  \n        if (center) {\n          var results = [{\n            name: query,\n            center: center,\n            bbox: center.toBounds(this.options.sizeInMeters)\n          }];\n          cb.call(context, results);\n        } else if (this.options.next) {\n          this.options.next.geocode(query, cb, context);\n        }\n      };\n  \n      return LatLng;\n    }();\n    /**\n     * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link LatLng}\n     * @param options the options\n     */\n  \n    function latLng(options) {\n      return new LatLng(options);\n    }\n  \n    /**\n     * Implementation of the [Mapbox Geocoding](https://www.mapbox.com/api-documentation/#geocoding)\n     */\n  \n    var Mapbox = /*#__PURE__*/function () {\n      function Mapbox(options) {\n        this.options = {\n          serviceUrl: 'https://api.mapbox.com/geocoding/v5/mapbox.places/'\n        };\n        L__namespace.Util.setOptions(this, options);\n      }\n  \n      var _proto = Mapbox.prototype;\n  \n      _proto._getProperties = function _getProperties(loc) {\n        var properties = {\n          text: loc.text,\n          address: loc.address\n        };\n  \n        for (var j = 0; j < (loc.context || []).length; j++) {\n          var id = loc.context[j].id.split('.')[0];\n          properties[id] = loc.context[j].text; // Get country code when available\n  \n          if (loc.context[j].short_code) {\n            properties['countryShortCode'] = loc.context[j].short_code;\n          }\n        }\n  \n        return properties;\n      };\n  \n      _proto.geocode = function geocode(query, cb, context) {\n        var _this = this;\n  \n        var params = geocodingParams(this.options, {\n          access_token: this.options.apiKey\n        });\n  \n        if (params.proximity !== undefined && params.proximity.lat !== undefined && params.proximity.lng !== undefined) {\n          params.proximity = params.proximity.lng + ',' + params.proximity.lat;\n        }\n  \n        getJSON(this.options.serviceUrl + encodeURIComponent(query) + '.json', params, function (data) {\n          var results = [];\n  \n          if (data.features && data.features.length) {\n            for (var i = 0; i <= data.features.length - 1; i++) {\n              var loc = data.features[i];\n              var center = L__namespace.latLng(loc.center.reverse());\n              var bbox = void 0;\n  \n              if (loc.bbox) {\n                bbox = L__namespace.latLngBounds(L__namespace.latLng(loc.bbox.slice(0, 2).reverse()), L__namespace.latLng(loc.bbox.slice(2, 4).reverse()));\n              } else {\n                bbox = L__namespace.latLngBounds(center, center);\n              }\n  \n              results[i] = {\n                name: loc.place_name,\n                bbox: bbox,\n                center: center,\n                properties: _this._getProperties(loc)\n              };\n            }\n          }\n  \n          cb.call(context, results);\n        });\n      };\n  \n      _proto.suggest = function suggest(query, cb, context) {\n        return this.geocode(query, cb, context);\n      };\n  \n      _proto.reverse = function reverse(location, scale, cb, context) {\n        var _this2 = this;\n  \n        var url = this.options.serviceUrl + location.lng + ',' + location.lat + '.json';\n        var param = reverseParams(this.options, {\n          access_token: this.options.apiKey\n        });\n        getJSON(url, param, function (data) {\n          var results = [];\n  \n          if (data.features && data.features.length) {\n            for (var i = 0; i <= data.features.length - 1; i++) {\n              var loc = data.features[i];\n              var center = L__namespace.latLng(loc.center.reverse());\n              var bbox = void 0;\n  \n              if (loc.bbox) {\n                bbox = L__namespace.latLngBounds(L__namespace.latLng(loc.bbox.slice(0, 2).reverse()), L__namespace.latLng(loc.bbox.slice(2, 4).reverse()));\n              } else {\n                bbox = L__namespace.latLngBounds(center, center);\n              }\n  \n              results[i] = {\n                name: loc.place_name,\n                bbox: bbox,\n                center: center,\n                properties: _this2._getProperties(loc)\n              };\n            }\n          }\n  \n          cb.call(context, results);\n        });\n      };\n  \n      return Mapbox;\n    }();\n    /**\n     * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Mapbox}\n     * @param options the options\n     */\n  \n    function mapbox(options) {\n      return new Mapbox(options);\n    }\n  \n    /**\n     * Implementation of the [MapQuest Geocoding API](http://developer.mapquest.com/web/products/dev-services/geocoding-ws)\n     */\n  \n    var MapQuest = /*#__PURE__*/function () {\n      function MapQuest(options) {\n        this.options = {\n          serviceUrl: 'https://www.mapquestapi.com/geocoding/v1'\n        };\n        L__namespace.Util.setOptions(this, options); // MapQuest seems to provide URI encoded API keys,\n        // so to avoid encoding them twice, we decode them here\n  \n        this.options.apiKey = decodeURIComponent(this.options.apiKey);\n      }\n  \n      var _proto = MapQuest.prototype;\n  \n      _proto._formatName = function _formatName() {\n        return [].slice.call(arguments).filter(function (s) {\n          return !!s;\n        }).join(', ');\n      };\n  \n      _proto.geocode = function geocode(query, cb, context) {\n        var params = geocodingParams(this.options, {\n          key: this.options.apiKey,\n          location: query,\n          limit: 5,\n          outFormat: 'json'\n        });\n        getJSON(this.options.serviceUrl + '/address', params, L__namespace.Util.bind(function (data) {\n          var results = [];\n  \n          if (data.results && data.results[0].locations) {\n            for (var i = data.results[0].locations.length - 1; i >= 0; i--) {\n              var loc = data.results[0].locations[i];\n              var center = L__namespace.latLng(loc.latLng);\n              results[i] = {\n                name: this._formatName(loc.street, loc.adminArea4, loc.adminArea3, loc.adminArea1),\n                bbox: L__namespace.latLngBounds(center, center),\n                center: center\n              };\n            }\n          }\n  \n          cb.call(context, results);\n        }, this));\n      };\n  \n      _proto.reverse = function reverse(location, scale, cb, context) {\n        var params = reverseParams(this.options, {\n          key: this.options.apiKey,\n          location: location.lat + ',' + location.lng,\n          outputFormat: 'json'\n        });\n        getJSON(this.options.serviceUrl + '/reverse', params, L__namespace.Util.bind(function (data) {\n          var results = [];\n  \n          if (data.results && data.results[0].locations) {\n            for (var i = data.results[0].locations.length - 1; i >= 0; i--) {\n              var loc = data.results[0].locations[i];\n              var center = L__namespace.latLng(loc.latLng);\n              results[i] = {\n                name: this._formatName(loc.street, loc.adminArea4, loc.adminArea3, loc.adminArea1),\n                bbox: L__namespace.latLngBounds(center, center),\n                center: center\n              };\n            }\n          }\n  \n          cb.call(context, results);\n        }, this));\n      };\n  \n      return MapQuest;\n    }();\n    /**\n     * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link MapQuest}\n     * @param options the options\n     */\n  \n    function mapQuest(options) {\n      return new MapQuest(options);\n    }\n  \n    /**\n     * Implementation of the [Neutrino API](https://www.neutrinoapi.com/api/geocode-address/)\n     */\n  \n    var Neutrino = /*#__PURE__*/function () {\n      function Neutrino(options) {\n        this.options = {\n          userId: undefined,\n          apiKey: undefined,\n          serviceUrl: 'https://neutrinoapi.com/'\n        };\n        L__namespace.Util.setOptions(this, options);\n      } // https://www.neutrinoapi.com/api/geocode-address/\n  \n  \n      var _proto = Neutrino.prototype;\n  \n      _proto.geocode = function geocode(query, cb, context) {\n        var params = geocodingParams(this.options, {\n          apiKey: this.options.apiKey,\n          userId: this.options.userId,\n          //get three words and make a dot based string\n          address: query.split(/\\s+/).join('.')\n        });\n        getJSON(this.options.serviceUrl + 'geocode-address', params, function (data) {\n          var results = [];\n  \n          if (data.locations) {\n            data.geometry = data.locations[0];\n            var center = L__namespace.latLng(data.geometry['latitude'], data.geometry['longitude']);\n            var bbox = L__namespace.latLngBounds(center, center);\n            results[0] = {\n              name: data.geometry.address,\n              bbox: bbox,\n              center: center\n            };\n          }\n  \n          cb.call(context, results);\n        });\n      };\n  \n      _proto.suggest = function suggest(query, cb, context) {\n        return this.geocode(query, cb, context);\n      } // https://www.neutrinoapi.com/api/geocode-reverse/\n      ;\n  \n      _proto.reverse = function reverse(location, scale, cb, context) {\n        var params = reverseParams(this.options, {\n          apiKey: this.options.apiKey,\n          userId: this.options.userId,\n          latitude: location.lat,\n          longitude: location.lng\n        });\n        getJSON(this.options.serviceUrl + 'geocode-reverse', params, function (data) {\n          var results = [];\n  \n          if (data.status.status == 200 && data.found) {\n            var center = L__namespace.latLng(location.lat, location.lng);\n            var bbox = L__namespace.latLngBounds(center, center);\n            results[0] = {\n              name: data.address,\n              bbox: bbox,\n              center: center\n            };\n          }\n  \n          cb.call(context, results);\n        });\n      };\n  \n      return Neutrino;\n    }();\n    /**\n     * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Neutrino}\n     * @param options the options\n     */\n  \n    function neutrino(options) {\n      return new Neutrino(options);\n    }\n  \n    /**\n     * Implementation of the [Nominatim](https://wiki.openstreetmap.org/wiki/Nominatim) geocoder.\n     *\n     * This is the default geocoding service used by the control, unless otherwise specified in the options.\n     *\n     * Unless using your own Nominatim installation, please refer to the [Nominatim usage policy](https://operations.osmfoundation.org/policies/nominatim/).\n     */\n  \n    var Nominatim = /*#__PURE__*/function () {\n      function Nominatim(options) {\n        this.options = {\n          serviceUrl: 'https://nominatim.openstreetmap.org/',\n          htmlTemplate: function htmlTemplate(r) {\n            var address = r.address;\n            var className;\n            var parts = [];\n  \n            if (address.road || address.building) {\n              parts.push('{building} {road} {house_number}');\n            }\n  \n            if (address.city || address.town || address.village || address.hamlet) {\n              className = parts.length > 0 ? 'leaflet-control-geocoder-address-detail' : '';\n              parts.push('<span class=\"' + className + '\">{postcode} {city} {town} {village} {hamlet}</span>');\n            }\n  \n            if (address.state || address.country) {\n              className = parts.length > 0 ? 'leaflet-control-geocoder-address-context' : '';\n              parts.push('<span class=\"' + className + '\">{state} {country}</span>');\n            }\n  \n            return template(parts.join('<br/>'), address);\n          }\n        };\n        L__namespace.Util.setOptions(this, options || {});\n      }\n  \n      var _proto = Nominatim.prototype;\n  \n      _proto.geocode = function geocode(query, cb, context) {\n        var _this = this;\n  \n        var params = geocodingParams(this.options, {\n          q: query,\n          limit: 5,\n          format: 'json',\n          addressdetails: 1\n        });\n        getJSON(this.options.serviceUrl + 'search', params, function (data) {\n          var results = [];\n  \n          for (var i = data.length - 1; i >= 0; i--) {\n            var bbox = data[i].boundingbox;\n  \n            for (var j = 0; j < 4; j++) {\n              bbox[j] = +bbox[j];\n            }\n  \n            results[i] = {\n              icon: data[i].icon,\n              name: data[i].display_name,\n              html: _this.options.htmlTemplate ? _this.options.htmlTemplate(data[i]) : undefined,\n              bbox: L__namespace.latLngBounds([bbox[0], bbox[2]], [bbox[1], bbox[3]]),\n              center: L__namespace.latLng(data[i].lat, data[i].lon),\n              properties: data[i]\n            };\n          }\n  \n          cb.call(context, results);\n        });\n      };\n  \n      _proto.reverse = function reverse(location, scale, cb, context) {\n        var _this2 = this;\n  \n        var params = reverseParams(this.options, {\n          lat: location.lat,\n          lon: location.lng,\n          zoom: Math.round(Math.log(scale / 256) / Math.log(2)),\n          addressdetails: 1,\n          format: 'json'\n        });\n        getJSON(this.options.serviceUrl + 'reverse', params, function (data) {\n          var result = [];\n  \n          if (data && data.lat && data.lon) {\n            var center = L__namespace.latLng(data.lat, data.lon);\n            var bbox = L__namespace.latLngBounds(center, center);\n            result.push({\n              name: data.display_name,\n              html: _this2.options.htmlTemplate ? _this2.options.htmlTemplate(data) : undefined,\n              center: center,\n              bbox: bbox,\n              properties: data\n            });\n          }\n  \n          cb.call(context, result);\n        });\n      };\n  \n      return Nominatim;\n    }();\n    /**\n     * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Nominatim}\n     * @param options the options\n     */\n  \n    function nominatim(options) {\n      return new Nominatim(options);\n    }\n  \n    /**\n     * Implementation of the [Plus codes](https://plus.codes/) (formerly OpenLocationCode) (requires [open-location-code](https://www.npmjs.com/package/open-location-code))\n     */\n  \n    var OpenLocationCode = /*#__PURE__*/function () {\n      function OpenLocationCode(options) {\n        L__namespace.Util.setOptions(this, options);\n      }\n  \n      var _proto = OpenLocationCode.prototype;\n  \n      _proto.geocode = function geocode(query, cb, context) {\n        try {\n          var decoded = this.options.OpenLocationCode.decode(query);\n          var result = {\n            name: query,\n            center: L__namespace.latLng(decoded.latitudeCenter, decoded.longitudeCenter),\n            bbox: L__namespace.latLngBounds(L__namespace.latLng(decoded.latitudeLo, decoded.longitudeLo), L__namespace.latLng(decoded.latitudeHi, decoded.longitudeHi))\n          };\n          cb.call(context, [result]);\n        } catch (e) {\n          console.warn(e); // eslint-disable-line no-console\n  \n          cb.call(context, []);\n        }\n      };\n  \n      _proto.reverse = function reverse(location, scale, cb, context) {\n        try {\n          var code = this.options.OpenLocationCode.encode(location.lat, location.lng, this.options.codeLength);\n          var result = {\n            name: code,\n            center: L__namespace.latLng(location.lat, location.lng),\n            bbox: L__namespace.latLngBounds(L__namespace.latLng(location.lat, location.lng), L__namespace.latLng(location.lat, location.lng))\n          };\n          cb.call(context, [result]);\n        } catch (e) {\n          console.warn(e); // eslint-disable-line no-console\n  \n          cb.call(context, []);\n        }\n      };\n  \n      return OpenLocationCode;\n    }();\n    /**\n     * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link OpenLocationCode}\n     * @param options the options\n     */\n  \n    function openLocationCode(options) {\n      return new OpenLocationCode(options);\n    }\n  \n    /**\n     * Implementation of the [OpenCage Data API](https://opencagedata.com/)\n     */\n  \n    var OpenCage = /*#__PURE__*/function () {\n      function OpenCage(options) {\n        this.options = {\n          serviceUrl: 'https://api.opencagedata.com/geocode/v1/json'\n        };\n        L__namespace.Util.setOptions(this, options);\n      }\n  \n      var _proto = OpenCage.prototype;\n  \n      _proto.geocode = function geocode(query, cb, context) {\n        var params = geocodingParams(this.options, {\n          key: this.options.apiKey,\n          q: query\n        });\n        getJSON(this.options.serviceUrl, params, function (data) {\n          var results = [];\n  \n          if (data.results && data.results.length) {\n            for (var i = 0; i < data.results.length; i++) {\n              var loc = data.results[i];\n              var center = L__namespace.latLng(loc.geometry);\n              var bbox = void 0;\n  \n              if (loc.annotations && loc.annotations.bounds) {\n                bbox = L__namespace.latLngBounds(L__namespace.latLng(loc.annotations.bounds.northeast), L__namespace.latLng(loc.annotations.bounds.southwest));\n              } else {\n                bbox = L__namespace.latLngBounds(center, center);\n              }\n  \n              results.push({\n                name: loc.formatted,\n                bbox: bbox,\n                center: center\n              });\n            }\n          }\n  \n          cb.call(context, results);\n        });\n      };\n  \n      _proto.suggest = function suggest(query, cb, context) {\n        return this.geocode(query, cb, context);\n      };\n  \n      _proto.reverse = function reverse(location, scale, cb, context) {\n        var params = reverseParams(this.options, {\n          key: this.options.apiKey,\n          q: [location.lat, location.lng].join(',')\n        });\n        getJSON(this.options.serviceUrl, params, function (data) {\n          var results = [];\n  \n          if (data.results && data.results.length) {\n            for (var i = 0; i < data.results.length; i++) {\n              var loc = data.results[i];\n              var center = L__namespace.latLng(loc.geometry);\n              var bbox = void 0;\n  \n              if (loc.annotations && loc.annotations.bounds) {\n                bbox = L__namespace.latLngBounds(L__namespace.latLng(loc.annotations.bounds.northeast), L__namespace.latLng(loc.annotations.bounds.southwest));\n              } else {\n                bbox = L__namespace.latLngBounds(center, center);\n              }\n  \n              results.push({\n                name: loc.formatted,\n                bbox: bbox,\n                center: center\n              });\n            }\n          }\n  \n          cb.call(context, results);\n        });\n      };\n  \n      return OpenCage;\n    }();\n    function opencage(options) {\n      return new OpenCage(options);\n    }\n  \n    /**\n     * Implementation of the [Pelias](https://pelias.io/), [geocode.earth](https://geocode.earth/) geocoder (formerly Mapzen Search)\n     */\n  \n    var Pelias = /*#__PURE__*/function () {\n      function Pelias(options) {\n        this.options = {\n          serviceUrl: 'https://api.geocode.earth/v1'\n        };\n        this._lastSuggest = 0;\n        L__namespace.Util.setOptions(this, options);\n      }\n  \n      var _proto = Pelias.prototype;\n  \n      _proto.geocode = function geocode(query, cb, context) {\n        var _this = this;\n  \n        var params = geocodingParams(this.options, {\n          api_key: this.options.apiKey,\n          text: query\n        });\n        getJSON(this.options.serviceUrl + '/search', params, function (data) {\n          cb.call(context, _this._parseResults(data, 'bbox'));\n        });\n      };\n  \n      _proto.suggest = function suggest(query, cb, context) {\n        var _this2 = this;\n  \n        var params = geocodingParams(this.options, {\n          api_key: this.options.apiKey,\n          text: query\n        });\n        getJSON(this.options.serviceUrl + '/autocomplete', params, function (data) {\n          if (data.geocoding.timestamp > _this2._lastSuggest) {\n            _this2._lastSuggest = data.geocoding.timestamp;\n            cb.call(context, _this2._parseResults(data, 'bbox'));\n          }\n        });\n      };\n  \n      _proto.reverse = function reverse(location, scale, cb, context) {\n        var _this3 = this;\n  \n        var params = reverseParams(this.options, {\n          api_key: this.options.apiKey,\n          'point.lat': location.lat,\n          'point.lon': location.lng\n        });\n        getJSON(this.options.serviceUrl + '/reverse', params, function (data) {\n          cb.call(context, _this3._parseResults(data, 'bounds'));\n        });\n      };\n  \n      _proto._parseResults = function _parseResults(data, bboxname) {\n        var results = [];\n        L__namespace.geoJSON(data, {\n          pointToLayer: function pointToLayer(feature, latlng) {\n            return L__namespace.circleMarker(latlng);\n          },\n          onEachFeature: function onEachFeature(feature, layer) {\n            var result = {};\n            var bbox;\n            var center;\n  \n            if (layer.getBounds) {\n              bbox = layer.getBounds();\n              center = bbox.getCenter();\n            } else if (layer.feature.bbox) {\n              center = layer.getLatLng();\n              bbox = L__namespace.latLngBounds(L__namespace.GeoJSON.coordsToLatLng(layer.feature.bbox.slice(0, 2)), L__namespace.GeoJSON.coordsToLatLng(layer.feature.bbox.slice(2, 4)));\n            } else {\n              center = layer.getLatLng();\n              bbox = L__namespace.latLngBounds(center, center);\n            }\n  \n            result.name = layer.feature.properties.label;\n            result.center = center;\n            result[bboxname] = bbox;\n            result.properties = layer.feature.properties;\n            results.push(result);\n          }\n        });\n        return results;\n      };\n  \n      return Pelias;\n    }();\n    /**\n     * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Pelias}\n     * @param options the options\n     */\n  \n    function pelias(options) {\n      return new Pelias(options);\n    }\n    var GeocodeEarth = Pelias;\n    var geocodeEarth = pelias;\n    /**\n     * r.i.p.\n     * @deprecated\n     */\n  \n    var Mapzen = Pelias;\n    /**\n     * r.i.p.\n     * @deprecated\n     */\n  \n    var mapzen = pelias;\n    /**\n     * Implementation of the [Openrouteservice](https://openrouteservice.org/dev/#/api-docs/geocode) geocoder\n     */\n  \n    var Openrouteservice = /*#__PURE__*/function (_Pelias) {\n      _inheritsLoose(Openrouteservice, _Pelias);\n  \n      function Openrouteservice(options) {\n        return _Pelias.call(this, L__namespace.Util.extend({\n          serviceUrl: 'https://api.openrouteservice.org/geocode'\n        }, options)) || this;\n      }\n  \n      return Openrouteservice;\n    }(Pelias);\n    /**\n     * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Openrouteservice}\n     * @param options the options\n     */\n  \n    function openrouteservice(options) {\n      return new Openrouteservice(options);\n    }\n  \n    /**\n     * Implementation of the [Photon](http://photon.komoot.de/) geocoder\n     */\n  \n    var Photon = /*#__PURE__*/function () {\n      function Photon(options) {\n        this.options = {\n          serviceUrl: 'https://photon.komoot.io/api/',\n          reverseUrl: 'https://photon.komoot.io/reverse/',\n          nameProperties: ['name', 'street', 'suburb', 'hamlet', 'town', 'city', 'state', 'country']\n        };\n        L__namespace.Util.setOptions(this, options);\n      }\n  \n      var _proto = Photon.prototype;\n  \n      _proto.geocode = function geocode(query, cb, context) {\n        var params = geocodingParams(this.options, {\n          q: query\n        });\n        getJSON(this.options.serviceUrl, params, L__namespace.Util.bind(function (data) {\n          cb.call(context, this._decodeFeatures(data));\n        }, this));\n      };\n  \n      _proto.suggest = function suggest(query, cb, context) {\n        return this.geocode(query, cb, context);\n      };\n  \n      _proto.reverse = function reverse(latLng, scale, cb, context) {\n        var params = reverseParams(this.options, {\n          lat: latLng.lat,\n          lon: latLng.lng\n        });\n        getJSON(this.options.reverseUrl, params, L__namespace.Util.bind(function (data) {\n          cb.call(context, this._decodeFeatures(data));\n        }, this));\n      };\n  \n      _proto._decodeFeatures = function _decodeFeatures(data) {\n        var results = [];\n  \n        if (data && data.features) {\n          for (var i = 0; i < data.features.length; i++) {\n            var f = data.features[i];\n            var c = f.geometry.coordinates;\n            var center = L__namespace.latLng(c[1], c[0]);\n            var extent = f.properties.extent;\n            var bbox = extent ? L__namespace.latLngBounds([extent[1], extent[0]], [extent[3], extent[2]]) : L__namespace.latLngBounds(center, center);\n            results.push({\n              name: this._decodeFeatureName(f),\n              html: this.options.htmlTemplate ? this.options.htmlTemplate(f) : undefined,\n              center: center,\n              bbox: bbox,\n              properties: f.properties\n            });\n          }\n        }\n  \n        return results;\n      };\n  \n      _proto._decodeFeatureName = function _decodeFeatureName(f) {\n        return (this.options.nameProperties || []).map(function (p) {\n          return f.properties[p];\n        }).filter(function (v) {\n          return !!v;\n        }).join(', ');\n      };\n  \n      return Photon;\n    }();\n    /**\n     * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link Photon}\n     * @param options the options\n     */\n  \n    function photon(options) {\n      return new Photon(options);\n    }\n  \n    /**\n     * Implementation of the What3Words service\n     */\n  \n    var What3Words = /*#__PURE__*/function () {\n      function What3Words(options) {\n        this.options = {\n          serviceUrl: 'https://api.what3words.com/v2/'\n        };\n        L__namespace.Util.setOptions(this, options);\n      }\n  \n      var _proto = What3Words.prototype;\n  \n      _proto.geocode = function geocode(query, cb, context) {\n        //get three words and make a dot based string\n        getJSON(this.options.serviceUrl + 'forward', geocodingParams(this.options, {\n          key: this.options.apiKey,\n          addr: query.split(/\\s+/).join('.')\n        }), function (data) {\n          var results = [];\n  \n          if (data.geometry) {\n            var latLng = L__namespace.latLng(data.geometry['lat'], data.geometry['lng']);\n            var latLngBounds = L__namespace.latLngBounds(latLng, latLng);\n            results[0] = {\n              name: data.words,\n              bbox: latLngBounds,\n              center: latLng\n            };\n          }\n  \n          cb.call(context, results);\n        });\n      };\n  \n      _proto.suggest = function suggest(query, cb, context) {\n        return this.geocode(query, cb, context);\n      };\n  \n      _proto.reverse = function reverse(location, scale, cb, context) {\n        getJSON(this.options.serviceUrl + 'reverse', reverseParams(this.options, {\n          key: this.options.apiKey,\n          coords: [location.lat, location.lng].join(',')\n        }), function (data) {\n          var results = [];\n  \n          if (data.status.status == 200) {\n            var center = L__namespace.latLng(data.geometry['lat'], data.geometry['lng']);\n            var bbox = L__namespace.latLngBounds(center, center);\n            results[0] = {\n              name: data.words,\n              bbox: bbox,\n              center: center\n            };\n          }\n  \n          cb.call(context, results);\n        });\n      };\n  \n      return What3Words;\n    }();\n    /**\n     * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link What3Words}\n     * @param options the options\n     */\n  \n    function what3words(options) {\n      return new What3Words(options);\n    }\n  \n    var geocoders = {\n      __proto__: null,\n      geocodingParams: geocodingParams,\n      reverseParams: reverseParams,\n      ArcGis: ArcGis,\n      arcgis: arcgis,\n      Bing: Bing,\n      bing: bing,\n      Google: Google,\n      google: google,\n      HERE: HERE,\n      HEREv2: HEREv2,\n      here: here,\n      parseLatLng: parseLatLng,\n      LatLng: LatLng,\n      latLng: latLng,\n      Mapbox: Mapbox,\n      mapbox: mapbox,\n      MapQuest: MapQuest,\n      mapQuest: mapQuest,\n      Neutrino: Neutrino,\n      neutrino: neutrino,\n      Nominatim: Nominatim,\n      nominatim: nominatim,\n      OpenLocationCode: OpenLocationCode,\n      openLocationCode: openLocationCode,\n      OpenCage: OpenCage,\n      opencage: opencage,\n      Pelias: Pelias,\n      pelias: pelias,\n      GeocodeEarth: GeocodeEarth,\n      geocodeEarth: geocodeEarth,\n      Mapzen: Mapzen,\n      mapzen: mapzen,\n      Openrouteservice: Openrouteservice,\n      openrouteservice: openrouteservice,\n      Photon: Photon,\n      photon: photon,\n      What3Words: What3Words,\n      what3words: what3words\n    };\n  \n    /**\n     * Leaflet mixins https://leafletjs.com/reference-1.7.1.html#class-includes\n     * for TypeScript https://www.typescriptlang.org/docs/handbook/mixins.html\n     * @internal\n     */\n  \n    var EventedControl = // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    function EventedControl() {// empty\n    };\n  \n    L__namespace.Util.extend(EventedControl.prototype, L__namespace.Control.prototype);\n    L__namespace.Util.extend(EventedControl.prototype, L__namespace.Evented.prototype);\n    /**\n     * This is the geocoder control. It works like any other [Leaflet control](https://leafletjs.com/reference.html#control), and is added to the map.\n     */\n  \n    var GeocoderControl = /*#__PURE__*/function (_EventedControl) {\n      _inheritsLoose(GeocoderControl, _EventedControl);\n  \n      /**\n       * Instantiates a geocoder control (to be invoked using `new`)\n       * @param options the options\n       */\n      function GeocoderControl(options) {\n        var _this;\n  \n        _this = _EventedControl.call(this, options) || this;\n        _this.options = {\n          showUniqueResult: true,\n          showResultIcons: false,\n          collapsed: true,\n          expand: 'touch',\n          position: 'topright',\n          placeholder: 'Search...',\n          errorMessage: 'Nothing found.',\n          iconLabel: 'Initiate a new search',\n          query: '',\n          queryMinLength: 1,\n          suggestMinLength: 3,\n          suggestTimeout: 250,\n          defaultMarkGeocode: true\n        };\n        _this._requestCount = 0;\n        L__namespace.Util.setOptions(_assertThisInitialized(_this), options);\n  \n        if (!_this.options.geocoder) {\n          _this.options.geocoder = new Nominatim();\n        }\n  \n        return _this;\n      }\n  \n      var _proto = GeocoderControl.prototype;\n  \n      _proto.addThrobberClass = function addThrobberClass() {\n        L__namespace.DomUtil.addClass(this._container, 'leaflet-control-geocoder-throbber');\n      };\n  \n      _proto.removeThrobberClass = function removeThrobberClass() {\n        L__namespace.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-throbber');\n      }\n      /**\n       * Returns the container DOM element for the control and add listeners on relevant map events.\n       * @param map the map instance\n       * @see https://leafletjs.com/reference.html#control-onadd\n       */\n      ;\n  \n      _proto.onAdd = function onAdd(map) {\n        var _this2 = this;\n  \n        var className = 'leaflet-control-geocoder';\n        var container = L__namespace.DomUtil.create('div', className + ' leaflet-bar');\n        var icon = L__namespace.DomUtil.create('button', className + '-icon', container);\n        var form = this._form = L__namespace.DomUtil.create('div', className + '-form', container);\n        this._map = map;\n        this._container = container;\n        icon.innerHTML = '&nbsp;';\n        icon.type = 'button';\n        icon.setAttribute('aria-label', this.options.iconLabel);\n        var input = this._input = L__namespace.DomUtil.create('input', '', form);\n        input.type = 'text';\n        input.value = this.options.query;\n        input.placeholder = this.options.placeholder;\n        L__namespace.DomEvent.disableClickPropagation(input);\n        this._errorElement = L__namespace.DomUtil.create('div', className + '-form-no-error', container);\n        this._errorElement.innerHTML = this.options.errorMessage;\n        this._alts = L__namespace.DomUtil.create('ul', className + '-alternatives leaflet-control-geocoder-alternatives-minimized', container);\n        L__namespace.DomEvent.disableClickPropagation(this._alts);\n        L__namespace.DomEvent.addListener(input, 'keydown', this._keydown, this);\n  \n        if (this.options.geocoder.suggest) {\n          L__namespace.DomEvent.addListener(input, 'input', this._change, this);\n        }\n  \n        L__namespace.DomEvent.addListener(input, 'blur', function () {\n          if (_this2.options.collapsed && !_this2._preventBlurCollapse) {\n            _this2._collapse();\n          }\n  \n          _this2._preventBlurCollapse = false;\n        });\n  \n        if (this.options.collapsed) {\n          if (this.options.expand === 'click') {\n            L__namespace.DomEvent.addListener(container, 'click', function (e) {\n              if (e.button === 0 && e.detail !== 2) {\n                _this2._toggle();\n              }\n            });\n          } else if (this.options.expand === 'touch') {\n            L__namespace.DomEvent.addListener(container, L__namespace.Browser.touch ? 'touchstart mousedown' : 'mousedown', function (e) {\n              _this2._toggle();\n  \n              e.preventDefault(); // mobile: clicking focuses the icon, so UI expands and immediately collapses\n  \n              e.stopPropagation();\n            }, this);\n          } else {\n            L__namespace.DomEvent.addListener(container, 'mouseover', this._expand, this);\n            L__namespace.DomEvent.addListener(container, 'mouseout', this._collapse, this);\n  \n            this._map.on('movestart', this._collapse, this);\n          }\n        } else {\n          this._expand();\n  \n          if (L__namespace.Browser.touch) {\n            L__namespace.DomEvent.addListener(container, 'touchstart', function () {\n              return _this2._geocode();\n            });\n          } else {\n            L__namespace.DomEvent.addListener(container, 'click', function () {\n              return _this2._geocode();\n            });\n          }\n        }\n  \n        if (this.options.defaultMarkGeocode) {\n          this.on('markgeocode', this.markGeocode, this);\n        }\n  \n        this.on('startgeocode', this.addThrobberClass, this);\n        this.on('finishgeocode', this.removeThrobberClass, this);\n        this.on('startsuggest', this.addThrobberClass, this);\n        this.on('finishsuggest', this.removeThrobberClass, this);\n        L__namespace.DomEvent.disableClickPropagation(container);\n        return container;\n      }\n      /**\n       * Sets the query string on the text input\n       * @param string the query string\n       */\n      ;\n  \n      _proto.setQuery = function setQuery(string) {\n        this._input.value = string;\n        return this;\n      };\n  \n      _proto._geocodeResult = function _geocodeResult(results, suggest) {\n        if (!suggest && this.options.showUniqueResult && results.length === 1) {\n          this._geocodeResultSelected(results[0]);\n        } else if (results.length > 0) {\n          this._alts.innerHTML = '';\n          this._results = results;\n          L__namespace.DomUtil.removeClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n          L__namespace.DomUtil.addClass(this._container, 'leaflet-control-geocoder-options-open');\n  \n          for (var i = 0; i < results.length; i++) {\n            this._alts.appendChild(this._createAlt(results[i], i));\n          }\n        } else {\n          L__namespace.DomUtil.addClass(this._container, 'leaflet-control-geocoder-options-error');\n          L__namespace.DomUtil.addClass(this._errorElement, 'leaflet-control-geocoder-error');\n        }\n      }\n      /**\n       * Marks a geocoding result on the map\n       * @param result the geocoding result\n       */\n      ;\n  \n      _proto.markGeocode = function markGeocode(event) {\n        var result = event.geocode;\n  \n        this._map.fitBounds(result.bbox);\n  \n        if (this._geocodeMarker) {\n          this._map.removeLayer(this._geocodeMarker);\n        }\n  \n        this._geocodeMarker = new L__namespace.Marker(result.center).bindPopup(result.html || result.name).addTo(this._map).openPopup();\n        return this;\n      };\n  \n      _proto._geocode = function _geocode(suggest) {\n        var _this3 = this;\n  \n        var value = this._input.value;\n  \n        if (!suggest && value.length < this.options.queryMinLength) {\n          return;\n        }\n  \n        var requestCount = ++this._requestCount;\n  \n        var cb = function cb(results) {\n          if (requestCount === _this3._requestCount) {\n            var _event = {\n              input: value,\n              results: results\n            };\n  \n            _this3.fire(suggest ? 'finishsuggest' : 'finishgeocode', _event);\n  \n            _this3._geocodeResult(results, suggest);\n          }\n        };\n  \n        this._lastGeocode = value;\n  \n        if (!suggest) {\n          this._clearResults();\n        }\n  \n        var event = {\n          input: value\n        };\n        this.fire(suggest ? 'startsuggest' : 'startgeocode', event);\n  \n        if (suggest) {\n          this.options.geocoder.suggest(value, cb);\n        } else {\n          this.options.geocoder.geocode(value, cb);\n        }\n      };\n  \n      _proto._geocodeResultSelected = function _geocodeResultSelected(geocode) {\n        var event = {\n          geocode: geocode\n        };\n        this.fire('markgeocode', event);\n      };\n  \n      _proto._toggle = function _toggle() {\n        if (L__namespace.DomUtil.hasClass(this._container, 'leaflet-control-geocoder-expanded')) {\n          this._collapse();\n        } else {\n          this._expand();\n        }\n      };\n  \n      _proto._expand = function _expand() {\n        L__namespace.DomUtil.addClass(this._container, 'leaflet-control-geocoder-expanded');\n  \n        this._input.select();\n  \n        this.fire('expand');\n      };\n  \n      _proto._collapse = function _collapse() {\n        L__namespace.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-expanded');\n        L__namespace.DomUtil.addClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n        L__namespace.DomUtil.removeClass(this._errorElement, 'leaflet-control-geocoder-error');\n        L__namespace.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-options-open');\n        L__namespace.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-options-error');\n  \n        this._input.blur(); // mobile: keyboard shouldn't stay expanded\n  \n  \n        this.fire('collapse');\n      };\n  \n      _proto._clearResults = function _clearResults() {\n        L__namespace.DomUtil.addClass(this._alts, 'leaflet-control-geocoder-alternatives-minimized');\n        this._selection = null;\n        L__namespace.DomUtil.removeClass(this._errorElement, 'leaflet-control-geocoder-error');\n        L__namespace.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-options-open');\n        L__namespace.DomUtil.removeClass(this._container, 'leaflet-control-geocoder-options-error');\n      };\n  \n      _proto._createAlt = function _createAlt(result, index) {\n        var _this4 = this;\n  \n        var li = L__namespace.DomUtil.create('li', ''),\n            a = L__namespace.DomUtil.create('a', '', li),\n            icon = this.options.showResultIcons && result.icon ? L__namespace.DomUtil.create('img', '', a) : null,\n            text = result.html ? undefined : document.createTextNode(result.name),\n            mouseDownHandler = function mouseDownHandler(e) {\n          // In some browsers, a click will fire on the map if the control is\n          // collapsed directly after mousedown. To work around this, we\n          // wait until the click is completed, and _then_ collapse the\n          // control. Messy, but this is the workaround I could come up with\n          // for #142.\n          _this4._preventBlurCollapse = true;\n          L__namespace.DomEvent.stop(e);\n  \n          _this4._geocodeResultSelected(result);\n  \n          L__namespace.DomEvent.on(li, 'click touchend', function () {\n            if (_this4.options.collapsed) {\n              _this4._collapse();\n            } else {\n              _this4._clearResults();\n            }\n          });\n        };\n  \n        if (icon) {\n          icon.src = result.icon;\n        }\n  \n        li.setAttribute('data-result-index', String(index));\n  \n        if (result.html) {\n          a.innerHTML = a.innerHTML + result.html;\n        } else if (text) {\n          a.appendChild(text);\n        } // Use mousedown and not click, since click will fire _after_ blur,\n        // causing the control to have collapsed and removed the items\n        // before the click can fire.\n  \n  \n        L__namespace.DomEvent.addListener(li, 'mousedown touchstart', mouseDownHandler, this);\n        return li;\n      };\n  \n      _proto._keydown = function _keydown(e) {\n        var _this5 = this;\n  \n        var select = function select(dir) {\n          if (_this5._selection) {\n            L__namespace.DomUtil.removeClass(_this5._selection, 'leaflet-control-geocoder-selected');\n            _this5._selection = _this5._selection[dir > 0 ? 'nextSibling' : 'previousSibling'];\n          }\n  \n          if (!_this5._selection) {\n            _this5._selection = _this5._alts[dir > 0 ? 'firstChild' : 'lastChild'];\n          }\n  \n          if (_this5._selection) {\n            L__namespace.DomUtil.addClass(_this5._selection, 'leaflet-control-geocoder-selected');\n          }\n        };\n  \n        switch (e.keyCode) {\n          // Escape\n          case 27:\n            if (this.options.collapsed) {\n              this._collapse();\n            } else {\n              this._clearResults();\n            }\n  \n            break;\n          // Up\n  \n          case 38:\n            select(-1);\n            break;\n          // Up\n  \n          case 40:\n            select(1);\n            break;\n          // Enter\n  \n          case 13:\n            if (this._selection) {\n              var index = parseInt(this._selection.getAttribute('data-result-index'), 10);\n  \n              this._geocodeResultSelected(this._results[index]);\n  \n              this._clearResults();\n            } else {\n              this._geocode();\n            }\n  \n            break;\n  \n          default:\n            return;\n        }\n  \n        L__namespace.DomEvent.preventDefault(e);\n      };\n  \n      _proto._change = function _change() {\n        var _this6 = this;\n  \n        var v = this._input.value;\n  \n        if (v !== this._lastGeocode) {\n          clearTimeout(this._suggestTimeout);\n  \n          if (v.length >= this.options.suggestMinLength) {\n            this._suggestTimeout = setTimeout(function () {\n              return _this6._geocode(true);\n            }, this.options.suggestTimeout);\n          } else {\n            this._clearResults();\n          }\n        }\n      };\n  \n      return GeocoderControl;\n    }(EventedControl);\n    /**\n     * [Class factory method](https://leafletjs.com/reference.html#class-class-factories) for {@link GeocoderControl}\n     * @param options the options\n     */\n  \n    function geocoder(options) {\n      return new GeocoderControl(options);\n    }\n  \n    /* @preserve\n     * Leaflet Control Geocoder\n     * https://github.com/perliedman/leaflet-control-geocoder\n     *\n     * Copyright (c) 2012 sa3m (https://github.com/sa3m)\n     * Copyright (c) 2018 Per Liedman\n     * All rights reserved.\n     */\n    L__namespace.Util.extend(GeocoderControl, geocoders);\n    L__namespace.Util.extend(L__namespace.Control, {\n      Geocoder: GeocoderControl,\n      geocoder: geocoder\n    });\n  \n    exports.Geocoder = GeocoderControl;\n    exports.default = GeocoderControl;\n    exports.geocoder = geocoder;\n    exports.geocoders = geocoders;\n  \n    return exports;\n  \n  }({}, L));\n  //# sourceMappingURL=Control.Geocoder.js.map"],"mappings":"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"},"metadata":{},"sourceType":"module"}