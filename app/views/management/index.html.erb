<!DOCTYPE html>
<html lang="it">
<head>

	<title> Gestione sito - Spacebook </title>

	<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/dataTables.bootstrap.min.css">

    <script>
        $(document).ready(function () {
            $('#datatableDipartimenti').DataTable({
                dom: '<"row"<"col"l>><"row"<"col"<"dropdown-divider mb-0">>><"row"<"col"t>><"row mt-1"<"col"p>><"row"<"col"<"dropdown-divider">>>',
                scrollX: true,
                filter: 'false',
                pagingType: "simple_numbers",
                pageLength: 10,
                language: {
                    lengthMenu: '<label><h6> Mostra </h6></label> _MENU_ <label><h6> dipartimenti contemporaneamente </h6></label>',
                    zeroRecords: 'Nessun dipartimento',
                    paginate: {
                        first:    '<i class="bi bi-caret-left-fill"></i>',
                        previous: '<i class="bi bi-arrow-left-circle"></i>',
                        next:     '<i class="bi bi-arrow-right-circle"></i>',
                        last:     '<i class="bi bi-caret-right-fill"></i>'
                    }
                }
            });
			$('#datatableUtenti').DataTable({
                dom: '<"row"<"col"l>><"row"<"col"<"dropdown-divider mb-0">>><"row"<"col"t>><"row mt-1"<"col"p>><"row"<"col"<"dropdown-divider">>>',
                scrollX: true,
                filter: 'false',
                pagingType: "simple_numbers",
                pageLength: 10,
                language: {
                    lengthMenu: '<label><h6> Mostra </h6></label> _MENU_ <label><h6> utenti contemporaneamente </h6></label>',
                    zeroRecords: 'Nessun utente',
                    paginate: {
                        first:    '<i class="bi bi-caret-left-fill"></i>',
                        previous: '<i class="bi bi-arrow-left-circle"></i>',
                        next:     '<i class="bi bi-arrow-right-circle"></i>',
                        last:     '<i class="bi bi-caret-right-fill"></i>'
                    }
                }
            });
			$('#datatablePrenotazioni').DataTable({
                dom: '<"row"<"col"l>><"row"<"col"<"dropdown-divider mb-0">>><"row"<"col"t>><"row mt-1"<"col"p>><"row"<"col"<"dropdown-divider">>>',
                scrollX: true,
                filter: 'false',
                pagingType: "simple_numbers",
                pageLength: 10,
                language: {
                    lengthMenu: '<label><h6> Mostra </h6></label> _MENU_ <label><h6> prenotazioni contemporaneamente </h6></label>',
                    zeroRecords: 'Nessuna prenotazione',
                    paginate: {
                        first:    '<i class="bi bi-caret-left-fill"></i>',
                        previous: '<i class="bi bi-arrow-left-circle"></i>',
                        next:     '<i class="bi bi-arrow-right-circle"></i>',
                        last:     '<i class="bi bi-caret-right-fill"></i>'
                    }
                }
            });
        });
    </script>

</head>


<body>

<div class="row">
	<div class="col">
		<div class="card shadow-lg border-0 rounded-lg">
			<div class="card-header text-center">
				<h3 class="font-weight-light my-3"> Dipartimenti </h3>
			</div>
			<div class="card-body">
				<table id="datatableDipartimenti" class="display table-responsive table-striped table-hover" width="100%">
					<thead>
						<tr>
							<th> Nome </th>
							<th> Email del manager </th>
							<th> Indirizzo </th>
							<th> Numero di piani </th> 
							<th> Numero di spazi </th>
							<th> Grandezza degli slot prenotabili </th>
							<th> Opzioni </th>
						</tr>
					</thead>
					<tbody>
						<% @departments.each do |department| %>
						<tr>
							<td><%= department.name %></td>
							<td><%= department.manager %></td>
							<td><%= department.via %>, <%= department.civico %>, <%= department.cap %>, <%= department.citta %>, <%= department.provincia %></td>
							<td><%= department.floors %></td>
							<td><%= department.number_of_spaces %></td>
							<td><%= department.slot %>h</td>
							<td>
							<%= button_to 'Elimina', department, method: :delete, data: { confirm: 'Are you sure?'}, :class => "btn btn-sm btn-outline-info" %>
							<%= button_to 'Mostra', department, method: :get, :class => "btn btn-sm btn-outline-info" %>
							</td>
						</tr>
						<% end %>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>

<div class="row mt-4">
	<div class="col-xl-4">
		<div class="card shadow-lg border-0 rounded-lg">
			<div class="card-header text-center">
				<h3 class="font-weight-light my-3"> Utenti </h3>
			</div>
			<div class="card-body">
				<table id="datatableUtenti" class="display table-responsive table-striped table-hover" width="100%">
					<thead>
						<th> Email </th>
						<th> Ruolo </th>
						<th> Opzioni </th>
					</thead>
					<tbody>
						<% @users.each do |user| %>
							<tr>
								<td><%= user.email %></td>
								<td><%= user.roles %></td>
								<td> <button class="btn btn-sm btn-outline-info"> Sospendi </button> </td>
							</tr>
						<% end %>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<div class="col-xl-8">
		<div class="card shadow-lg border-0 rounded-lg">
			<div class="card-header text-center">
				<h3 class="font-weight-light my-3"> Prenotazioni </h3>
			</div>
			<div class="card-body">
				<table id="datatablePrenotazioni" class="display table-responsive table-striped table-hover" width="100%">
					<thead>
						<tr>
							<th> Utente </th>
							<th> Dipartimento </th>
							<th> Tipologia </th>
							<th> Spazio </th>
							<th> Piano </th>
							<th> Posto </th>
							<th> Stato </th>
							<th> Opzioni </th>
						</tr>
					</thead>
					<tbody>
						<% @reservations.each do |reservation| %>
							<tr>
								<td><%= reservation.email %></td>
								<td><%= reservation.dep_name %></td>
								<td><%= reservation.typology %></td>
								<td><%= reservation.space_name %></td>
								<td><%= reservation.floor %></td>
								<td><%= reservation.seat_num %></td>
								<td><%= reservation.state %></td>
								<td><%= button_to 'Destroy', reservation, method: :delete, data: { confirm: 'Are you sure?' }, :class => "btn btn-sm btn-outline-info" %></td>
							</tr>
						<% end %>
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>


</body>
</html>